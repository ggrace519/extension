var ot=Object.defineProperty;var rt=(t,l,e)=>l in t?ot(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e;var Me=(t,l,e)=>rt(t,typeof l!="symbol"?l+"":l,e);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function $(){}function Ze(t){return t()}function Oe(){return Object.create(null)}function ee(t){t.forEach(Ze)}function Ve(t){return typeof t=="function"}function Ye(t,l){return t!=t?l==l:t!==l||t&&typeof t=="object"||typeof t=="function"}function st(t){return Object.keys(t).length===0}function c(t,l){t.appendChild(l)}function N(t,l,e){t.insertBefore(l,e||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,l){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(l)}function p(t){return document.createElement(t)}function be(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function D(t){return document.createTextNode(t)}function L(){return D(" ")}function Qe(){return D("")}function R(t,l,e,o){return t.addEventListener(l,e,o),()=>t.removeEventListener(l,e,o)}function it(t){return function(l){return l.preventDefault(),t.call(this,l)}}function i(t,l,e){e==null?t.removeAttribute(l):t.getAttribute(l)!==e&&t.setAttribute(l,e)}function dt(t){return Array.from(t.childNodes)}function ce(t,l){l=""+l,t.data!==l&&(t.data=l)}function z(t,l){t.value=l??""}function Pe(t,l,e){for(let o=0;o<t.options.length;o+=1){const n=t.options[o];if(n.__value===l){n.selected=!0;return}}(!e||l!==void 0)&&(t.selectedIndex=-1)}function ct(t){const l=t.querySelector(":checked");return l&&l.__value}let de;function ie(t){de=t}function at(){if(!de)throw new Error("Function called outside component initialization");return de}function ut(t){at().$$.on_mount.push(t)}const ne=[],Ae=[];let oe=[];const Re=[],ft=Promise.resolve();let Te=!1;function wt(){Te||(Te=!0,ft.then(Xe))}function _e(t){oe.push(t)}const Le=new Set;let le=0;function Xe(){if(le!==0)return;const t=de;do{try{for(;le<ne.length;){const l=ne[le];le++,ie(l),pt(l.$$)}}catch(l){throw ne.length=0,le=0,l}for(ie(null),ne.length=0,le=0;Ae.length;)Ae.pop()();for(let l=0;l<oe.length;l+=1){const e=oe[l];Le.has(e)||(Le.add(e),e())}oe.length=0}while(ne.length);for(;Re.length;)Re.pop()();Te=!1,Le.clear(),ie(t)}function pt(t){if(t.fragment!==null){t.update(),ee(t.before_update);const l=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,l),t.after_update.forEach(_e)}}function mt(t){const l=[],e=[];oe.forEach(o=>t.indexOf(o)===-1?l.push(o):e.push(o)),e.forEach(o=>o()),oe=l}const ye=new Set;let ht;function Ge(t,l){t&&t.i&&(ye.delete(t),t.i(l))}function gt(t,l,e,o){if(t&&t.o){if(ye.has(t))return;ye.add(t),ht.c.push(()=>{ye.delete(t)}),t.o(l)}}function xe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function yt(t){t&&t.c()}function $e(t,l,e){const{fragment:o,after_update:n}=t.$$;o&&o.m(l,e),_e(()=>{const r=t.$$.on_mount.map(Ze).filter(Ve);t.$$.on_destroy?t.$$.on_destroy.push(...r):ee(r),t.$$.on_mount=[]}),n.forEach(_e)}function et(t,l){const e=t.$$;e.fragment!==null&&(mt(e.after_update),ee(e.on_destroy),e.fragment&&e.fragment.d(l),e.on_destroy=e.fragment=null,e.ctx=[])}function bt(t,l){t.$$.dirty[0]===-1&&(ne.push(t),wt(),t.$$.dirty.fill(0)),t.$$.dirty[l/31|0]|=1<<l%31}function tt(t,l,e,o,n,r,s=null,u=[-1]){const f=de;ie(t);const d=t.$$={fragment:null,ctx:[],props:r,update:$,not_equal:n,bound:Oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(f?f.$$.context:[])),callbacks:Oe(),dirty:u,skip_bound:!1,root:l.target||f.$$.root};s&&s(d.root);let m=!1;if(d.ctx=e?e(t,l.props||{},(b,h,...g)=>{const w=g.length?g[0]:h;return d.ctx&&n(d.ctx[b],d.ctx[b]=w)&&(!d.skip_bound&&d.bound[b]&&d.bound[b](w),m&&bt(t,b)),h}):[],d.update(),m=!0,ee(d.before_update),d.fragment=o?o(d.ctx):!1,l.target){if(l.hydrate){const b=dt(l.target);d.fragment&&d.fragment.l(b),b.forEach(j)}else d.fragment&&d.fragment.c();l.intro&&Ge(t.$$.fragment),$e(t,l.target,l.anchor),Xe()}ie(f)}class lt{constructor(){Me(this,"$$");Me(this,"$$set")}$destroy(){et(this,1),this.$destroy=$}$on(l,e){if(!Ve(e))return $;const o=this.$$.callbacks[l]||(this.$$.callbacks[l]=[]);return o.push(e),()=>{const n=o.indexOf(e);n!==-1&&o.splice(n,1)}}$set(l){this.$$set&&!st(l)&&(this.$$.skip_bound=!0,this.$$set(l),this.$$.skip_bound=!1)}}const _t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_t);const He=async(t,l)=>new Promise((e,o)=>{chrome.runtime.sendMessage({action:"fetchModels",url:l,key:t},n=>{var s;if(chrome.runtime.lastError){o(new Error(chrome.runtime.lastError.message));return}if(n.error){o(n.error);return}let r=((s=n.data)==null?void 0:s.data)??[];r=r.filter(u=>u).sort((u,f)=>{const d=u.name.toLowerCase(),m=f.name.toLowerCase();return d<m?-1:d>m?1:u<f?-1:u>f?1:0}),console.log(r),e(r)})}),Ue=async(t="",l={},e="http://localhost:8080")=>new Promise((o,n)=>{const r=chrome.runtime.connect({name:"chat-stream"});let s=null,u=!1;const f=new ReadableStream({start(m){s=m}});r.onMessage.addListener(m=>{if(m.error){s&&s.error(new Error(m.error)),r.disconnect(),n(new Error(m.error));return}if(m.done){u=!0,s&&s.close(),r.disconnect();return}m.chunk&&s&&s.enqueue(new TextEncoder().encode(m.chunk))}),r.onDisconnect.addListener(()=>{!u&&s&&s.error(new Error("Stream disconnected unexpectedly"))});const d={ok:!0,status:200,body:f};r.postMessage({action:"fetchChatCompletion",url:e,api_key:t,body:l}),o([d,{abort:()=>{r.disconnect()}}])}),je=t=>{let l="";return new TransformStream({transform(e,o){l+=e;const n=l.split(t);n.slice(0,-1).forEach(r=>o.enqueue(r)),l=n[n.length-1]},flush(e){l&&e.enqueue(l)}})};function Ne(t,l,e){const o=t.slice();return o[34]=l[e],o[36]=e,o}function Ke(t,l,e){const o=t.slice();return o[15]=l[e],o}function Be(t){let l,e,o;function n(u,f){return u[1]?kt:xt}let r=n(t),s=r(t);return{c(){l=p("div"),s.c(),i(l,"class","tlwd-fixed tlwd-top-0 tlwd-right-0 tlwd-left-0 tlwd-bottom-0 tlwd-w-full tlwd-min-h-screen tlwd-h-screen tlwd-flex tlwd-justify-center tlwd-z-[9999999999] tlwd-overflow-hidden tlwd-overscroll-contain")},m(u,f){N(u,l,f),s.m(l,null),e||(o=R(l,"mousedown",t[26]),e=!0)},p(u,f){r===(r=n(u))&&s?s.p(u,f):(s.d(1),s=r(u),s&&(s.c(),s.m(l,null)))},d(u){u&&j(l),s.d(),e=!1,o()}}}function xt(t){let l,e,o,n,r,s,u,f,d,m,b,h,g,w;return{c(){l=p("div"),e=p("div"),o=p("form"),n=p("div"),r=p("div"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path></svg>`,s=L(),u=p("input"),f=L(),d=p("div"),m=p("div"),m.textContent="Press âŒ˜Space+Shift to toggle",b=L(),h=p("button"),h.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-3"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>`,i(r,"class","tlwd-flex tlwd-items-center"),i(u,"id","open-webui-search-input"),i(u,"placeholder","Search Open WebUI"),i(u,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),i(u,"autocomplete","one-time-code"),i(n,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full"),i(m,"class","tlwd-text-right tlwd-text-[0.7rem] tlwd-p-0 tlwd-m-0 tlwd-text-neutral-300 tlwd-h-fit"),i(h,"class","tlwd-h-fit tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-0 tlwd-m-0 tlwd-outline-none tlwd-border-none"),i(h,"type","button"),i(d,"class","tlwd-flex tlwd-justify-end tlwd-gap-1 tlwd-items-center"),i(o,"class","tlwd-text-gray-200 tlwd-w-full tlwd-p-0 tlwd-m-0"),i(o,"autocomplete","off"),i(e,"class","tlwd-w-full tlwd-flex tlwd-flex-col tlwd-justify-between tlwd-py-2.5 tlwd-px-3.5 tlwd-rounded-2xl tlwd-outline tlwd-outline-1 tlwd-outline-gray-850 tlwd-backdrop-blur-3xl tlwd-bg-gray-850/70 shadow-4xl modal-animation"),i(l,"class","tlwd-m-auto tlwd-max-w-xl tlwd-w-full tlwd-pb-32")},m(_,H){N(_,l,H),c(l,e),c(e,o),c(o,n),c(n,r),c(n,s),c(n,u),z(u,t[12]),c(o,f),c(o,d),c(d,m),c(d,b),c(d,h),g||(w=[R(u,"input",t[24]),R(h,"click",t[25]),R(o,"submit",t[16]),R(o,"mousedown",At)],g=!0)},p(_,H){H[0]&4096&&u.value!==_[12]&&z(u,_[12])},d(_){_&&j(l),g=!1,ee(w)}}}function kt(t){let l,e,o,n,r,s,u,f,d,m,b,h,g,w,_,H,T,C=t[13]&&t[13].length>0&&qe(t);return{c(){l=p("div"),e=p("div"),o=p("form"),n=p("div"),r=p("div"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>`,s=L(),u=p("input"),f=L(),d=p("div"),m=p("div"),m.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"></path></svg>`,b=L(),h=p("input"),g=L(),w=p("button"),w.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg>`,_=L(),C&&C.c(),i(r,"class","tlwd-flex tlwd-items-center"),i(u,"id","open-webui-url-input"),i(u,"placeholder","Open WebUI URL"),i(u,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),i(u,"autocomplete","one-time-code"),u.required=!0,i(n,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full"),i(m,"class","tlwd-flex tlwd-items-center"),i(h,"placeholder","Open WebUI API Key"),i(h,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),i(h,"autocomplete","one-time-code"),h.required=!0,i(w,"class","tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-0 tlwd-m-0 tlwd-outline-none tlwd-border-none"),i(w,"type","button"),i(d,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full tlwd-mt-2"),i(o,"class","tlwd-text-gray-200 tlwd-w-full tlwd-p-0 tlwd-m-0"),i(o,"autocomplete","off"),i(e,"class","tlwd-w-full tlwd-flex tlwd-flex-col tlwd-justify-between tlwd-py-2.5 tlwd-px-3.5 tlwd-rounded-2xl tlwd-outline tlwd-outline-1 tlwd-outline-gray-850 tlwd-backdrop-blur-3xl tlwd-bg-gray-850/70 shadow-4xl modal-animation"),i(l,"class","tlwd-m-auto tlwd-max-w-sm tlwd-w-full tlwd-pb-32")},m(S,W){N(S,l,W),c(l,e),c(e,o),c(o,n),c(n,r),c(n,s),c(n,u),z(u,t[10]),c(o,f),c(o,d),c(d,m),c(d,b),c(d,h),z(h,t[11]),c(d,g),c(d,w),c(o,_),C&&C.m(o,null),H||(T=[R(u,"input",t[20]),R(h,"input",t[21]),R(w,"click",t[22]),R(o,"submit",t[17]),R(o,"mousedown",Lt)],H=!0)},p(S,W){W[0]&1024&&u.value!==S[10]&&z(u,S[10]),W[0]&2048&&h.value!==S[11]&&z(h,S[11]),S[13]&&S[13].length>0?C?C.p(S,W):(C=qe(S),C.c(),C.m(o,null)):C&&(C.d(1),C=null)},d(S){S&&j(l),C&&C.d(),H=!1,ee(T)}}}function qe(t){let l,e,o,n,r,s,u,f,d,m=xe(t[13]),b=[];for(let h=0;h<m.length;h+=1)b[h]=ze(Ke(t,m,h));return{c(){l=p("div"),e=p("div"),e.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"></path></svg>`,o=L(),n=p("select"),r=p("option"),r.textContent="Select a model";for(let h=0;h<b.length;h+=1)b[h].c();s=L(),u=p("button"),u.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path></svg>`,i(e,"class","tlwd-flex tlwd-items-center"),r.__value="",z(r,r.__value),i(n,"id","open-webui-model-input"),i(n,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),i(n,"autocomplete","off"),n.required=!0,t[15]===void 0&&_e(()=>t[23].call(n)),i(u,"class","tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-0 tlwd-m-0 tlwd-outline-none tlwd-border-none"),i(u,"type","submit"),i(l,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full tlwd-mt-2")},m(h,g){N(h,l,g),c(l,e),c(l,o),c(l,n),c(n,r);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(n,null);Pe(n,t[15],!0),c(l,s),c(l,u),f||(d=R(n,"change",t[23]),f=!0)},p(h,g){if(g[0]&8192){m=xe(h[13]);let w;for(w=0;w<m.length;w+=1){const _=Ke(h,m,w);b[w]?b[w].p(_,g):(b[w]=ze(_),b[w].c(),b[w].m(n,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=m.length}g[0]&40960&&Pe(n,h[15])},d(h){h&&j(l),Je(b,h),f=!1,d()}}}function ze(t){let l,e=(t[15].name??t[15].id)+"",o,n;return{c(){l=p("option"),o=D(e),l.__value=n=t[15].id,z(l,l.__value)},m(r,s){N(r,l,s),c(l,o)},p(r,s){s[0]&8192&&e!==(e=(r[15].name??r[15].id)+"")&&ce(o,e),s[0]&8192&&n!==(n=r[15].id)&&(l.__value=n,z(l,l.__value))},d(r){r&&j(l)}}}function We(t){let l,e,o,n,r,s,u,f,d,m,b,h,g,w,_,H,T,C,S,W,F,Z,ae,V,B,q,Q,ue,te,fe,Y,re,we,J=xe(t[6]),U=[];for(let a=0;a<J.length;a+=1)U[a]=De(Ne(t,J,a));function ve(a,A){if(a[3]&&a[7])return Ct;if(a[7]&&!a[3])return It}let x=ve(t),y=x&&x(t),k=t[9]&&t[8]&&Fe(t);return{c(){l=p("div"),e=p("div"),o=p("div"),n=p("div"),r=p("div"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5 tlwd-text-neutral-300"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"></path></svg> <h3 class="tlwd-text-lg tlwd-font-semibold tlwd-text-neutral-100">AI Response</h3>`,s=L(),u=p("button"),u.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>`,f=L(),d=p("div");for(let a=0;a<U.length;a+=1)U[a].c();m=L(),y&&y.c(),b=L(),k&&k.c(),h=L(),g=p("div"),w=p("form"),_=p("input"),H=L(),T=p("button"),C=D("Send"),W=L(),F=p("div"),Z=p("div"),Z.textContent="Press Escape to close",ae=L(),V=p("div"),B=p("button"),q=be("svg"),Q=be("path"),ue=D(`
                Continue in OpenWebUI`),fe=L(),Y=p("button"),Y.textContent="Copy conversation",i(r,"class","tlwd-flex tlwd-items-center tlwd-gap-2"),i(u,"class","tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-400 hover:tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-1 tlwd-outline-none tlwd-border-none tlwd-transition-colors"),i(u,"type","button"),i(n,"class","tlwd-flex tlwd-items-center tlwd-justify-between tlwd-mb-4 tlwd-pb-3 tlwd-border-b tlwd-border-gray-700"),i(d,"class","tlwd-flex-1 tlwd-overflow-y-auto tlwd-pr-2 tlwd-mb-4"),i(_,"id","open-webui-followup-input"),i(_,"type","text"),i(_,"placeholder","Ask a follow-up question..."),_.disabled=t[7],i(_,"class","tlwd-flex-1 tlwd-px-3 tlwd-py-2 tlwd-text-sm tlwd-bg-gray-800/50 tlwd-border tlwd-border-gray-700 tlwd-rounded-lg tlwd-text-neutral-100 placeholder:tlwd-text-neutral-500 tlwd-outline-none focus:tlwd-border-gray-600 disabled:tlwd-opacity-50 disabled:tlwd-cursor-not-allowed"),i(_,"autocomplete","off"),i(T,"type","submit"),T.disabled=S=!t[5].trim()||t[7],i(T,"class","tlwd-px-4 tlwd-py-2 tlwd-text-sm tlwd-font-medium tlwd-bg-blue-600 hover:tlwd-bg-blue-700 disabled:tlwd-opacity-50 disabled:tlwd-cursor-not-allowed tlwd-text-white tlwd-rounded-lg tlwd-transition-colors tlwd-outline-none tlwd-border-none"),i(w,"class","tlwd-flex tlwd-items-center tlwd-gap-2"),i(Z,"class","tlwd-text-xs tlwd-text-neutral-400"),i(Q,"stroke-linecap","round"),i(Q,"stroke-linejoin","round"),i(Q,"d","M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"),i(q,"xmlns","http://www.w3.org/2000/svg"),i(q,"fill","none"),i(q,"viewBox","0 0 24 24"),i(q,"stroke-width",2),i(q,"stroke","currentColor"),i(q,"class","tlwd-size-4"),i(B,"class","tlwd-text-xs tlwd-text-blue-400 hover:tlwd-text-blue-300 tlwd-cursor-pointer tlwd-outline-none tlwd-border-none tlwd-bg-transparent tlwd-transition-colors tlwd-flex tlwd-items-center tlwd-gap-1"),i(B,"type","button"),B.disabled=te=t[6].length===0,i(Y,"class","tlwd-text-xs tlwd-text-neutral-300 hover:tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-outline-none tlwd-border-none tlwd-bg-transparent tlwd-transition-colors"),i(Y,"type","button"),i(V,"class","tlwd-flex tlwd-items-center tlwd-gap-3"),i(F,"class","tlwd-mt-3 tlwd-flex tlwd-items-center tlwd-justify-between"),i(g,"class","tlwd-border-t tlwd-border-gray-700 tlwd-pt-3"),i(o,"class","tlwd-w-full tlwd-flex tlwd-flex-col tlwd-justify-between tlwd-py-4 tlwd-px-5 tlwd-rounded-2xl tlwd-outline tlwd-outline-1 tlwd-outline-gray-850 tlwd-backdrop-blur-3xl tlwd-bg-gray-850/70 shadow-4xl modal-animation tlwd-max-h-[80vh] tlwd-overflow-hidden tlwd-flex tlwd-flex-col"),i(e,"class","tlwd-m-auto tlwd-max-w-3xl tlwd-w-full tlwd-pb-32 tlwd-px-4"),i(l,"class","tlwd-fixed tlwd-top-0 tlwd-right-0 tlwd-left-0 tlwd-bottom-0 tlwd-w-full tlwd-min-h-screen tlwd-h-screen tlwd-flex tlwd-justify-center tlwd-z-[9999999999] tlwd-overflow-hidden tlwd-overscroll-contain")},m(a,A){N(a,l,A),c(l,e),c(e,o),c(o,n),c(n,r),c(n,s),c(n,u),c(o,f),c(o,d);for(let M=0;M<U.length;M+=1)U[M]&&U[M].m(d,null);c(d,m),y&&y.m(d,null),t[28](d),c(o,b),k&&k.m(o,null),c(o,h),c(o,g),c(g,w),c(w,_),z(_,t[5]),c(w,H),c(w,T),c(T,C),c(g,W),c(g,F),c(F,Z),c(F,ae),c(F,V),c(V,B),c(B,q),c(q,Q),c(B,ue),c(V,fe),c(V,Y),re||(we=[R(u,"click",t[27]),R(_,"input",t[29]),R(w,"submit",it(t[19])),R(B,"click",t[18]),R(Y,"click",t[30]),R(o,"mousedown",Tt),R(l,"mousedown",t[31])],re=!0)},p(a,A){if(A[0]&64){J=xe(a[6]);let M;for(M=0;M<J.length;M+=1){const I=Ne(a,J,M);U[M]?U[M].p(I,A):(U[M]=De(I),U[M].c(),U[M].m(d,m))}for(;M<U.length;M+=1)U[M].d(1);U.length=J.length}x===(x=ve(a))&&y?y.p(a,A):(y&&y.d(1),y=x&&x(a),y&&(y.c(),y.m(d,null))),a[9]&&a[8]?k?k.p(a,A):(k=Fe(a),k.c(),k.m(o,h)):k&&(k.d(1),k=null),A[0]&128&&(_.disabled=a[7]),A[0]&32&&_.value!==a[5]&&z(_,a[5]),A[0]&160&&S!==(S=!a[5].trim()||a[7])&&(T.disabled=S),A[0]&64&&te!==(te=a[6].length===0)&&(B.disabled=te)},d(a){a&&j(l),Je(U,a),y&&y.d(),t[28](null),k&&k.d(),re=!1,ee(we)}}}function vt(t){let l,e,o,n,r=t[34].content+"",s,u;return{c(){l=p("div"),e=p("div"),e.textContent="Assistant:",o=L(),n=p("div"),s=D(r),u=L(),i(e,"class","tlwd-text-xs tlwd-text-neutral-400 tlwd-mb-1"),i(n,"class","tlwd-text-sm tlwd-text-neutral-100 tlwd-whitespace-pre-wrap tlwd-leading-relaxed"),i(l,"class","tlwd-mb-4")},m(f,d){N(f,l,d),c(l,e),c(l,o),c(l,n),c(n,s),c(l,u)},p(f,d){d[0]&64&&r!==(r=f[34].content+"")&&ce(s,r)},d(f){f&&j(l)}}}function Et(t){let l,e,o,n,r=t[34].content+"",s,u;return{c(){l=p("div"),e=p("div"),e.textContent="You:",o=L(),n=p("div"),s=D(r),u=L(),i(e,"class","tlwd-text-xs tlwd-text-neutral-400 tlwd-mb-1"),i(n,"class","tlwd-text-sm tlwd-text-neutral-200 tlwd-bg-gray-800/50 tlwd-rounded-lg tlwd-p-3"),i(l,"class","tlwd-mb-4")},m(f,d){N(f,l,d),c(l,e),c(l,o),c(l,n),c(n,s),c(l,u)},p(f,d){d[0]&64&&r!==(r=f[34].content+"")&&ce(s,r)},d(f){f&&j(l)}}}function De(t){let l;function e(r,s){if(r[34].role==="user")return Et;if(r[34].role==="assistant")return vt}let o=e(t),n=o&&o(t);return{c(){n&&n.c(),l=Qe()},m(r,s){n&&n.m(r,s),N(r,l,s)},p(r,s){o===(o=e(r))&&n?n.p(r,s):(n&&n.d(1),n=o&&o(r),n&&(n.c(),n.m(l.parentNode,l)))},d(r){r&&j(l),n&&n.d(r)}}}function It(t){let l;return{c(){l=p("div"),l.innerHTML='<div class="tlwd-text-xs tlwd-text-neutral-400 tlwd-mb-1">Assistant:</div> <span class="tlwd-text-neutral-400 tlwd-italic">Waiting for response...</span>',i(l,"class","tlwd-mb-4")},m(e,o){N(e,l,o)},p:$,d(e){e&&j(l)}}}function Ct(t){let l,e,o,n,r,s,u;return{c(){l=p("div"),e=p("div"),e.textContent="Assistant:",o=L(),n=p("div"),r=D(t[3]),s=L(),u=p("span"),u.textContent="|",i(e,"class","tlwd-text-xs tlwd-text-neutral-400 tlwd-mb-1"),i(u,"class","tlwd-inline-block tlwd-w-2 tlwd-h-4 tlwd-bg-neutral-400 tlwd-ml-1 tlwd-animate-pulse"),i(n,"class","tlwd-text-sm tlwd-text-neutral-100 tlwd-whitespace-pre-wrap tlwd-leading-relaxed"),i(l,"class","tlwd-mb-4")},m(f,d){N(f,l,d),c(l,e),c(l,o),c(l,n),c(n,r),c(n,s),c(n,u)},p(f,d){d[0]&8&&ce(r,f[3])},d(f){f&&j(l)}}}function Fe(t){let l,e,o,n,r,s,u;return{c(){l=p("div"),e=p("div"),o=be("svg"),n=be("path"),r=L(),s=p("p"),u=D(t[8]),i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"d","M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"),i(o,"xmlns","http://www.w3.org/2000/svg"),i(o,"fill","none"),i(o,"viewBox","0 0 24 24"),i(o,"stroke-width",2.5),i(o,"stroke","currentColor"),i(o,"class","tlwd-size-5 tlwd-text-red-400"),i(s,"class","tlwd-text-sm tlwd-text-red-300"),i(e,"class","tlwd-flex tlwd-items-center tlwd-gap-2"),i(l,"class","tlwd-mb-3 tlwd-p-3 tlwd-bg-red-900/20 tlwd-border tlwd-border-red-700/50 tlwd-rounded-lg")},m(f,d){N(f,l,d),c(l,e),c(e,o),c(o,n),c(e,r),c(e,s),c(s,u)},p(f,d){d[0]&256&&ce(u,f[8])},d(f){f&&j(l)}}}function Mt(t){let l,e,o=t[0]&&Be(t),n=t[2]&&We(t);return{c(){o&&o.c(),l=L(),n&&n.c(),e=Qe()},m(r,s){o&&o.m(r,s),N(r,l,s),n&&n.m(r,s),N(r,e,s)},p(r,s){r[0]?o?o.p(r,s):(o=Be(r),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),r[2]?n?n.p(r,s):(n=We(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:$,o:$,d(r){r&&(j(l),j(e)),o&&o.d(r),n&&n.d(r)}}}const Lt=t=>{t.stopPropagation()},At=t=>{t.stopPropagation()},Tt=t=>{t.stopPropagation()};function St(t,l,e){let o=!1,n=!0,r=!1,s="",u="",f="",d=[],m=!1,b="",h=!1,g="",w="",_="",H="",T=[],C=null;const S=()=>{console.log("resetConfig");try{chrome.storage.local.clear().then(()=>{console.log("Value is cleared")})}catch(x){console.log(x)}e(10,g=""),e(11,w=""),e(15,_=""),e(13,T=[]),e(1,n=!0)},W=x=>{x.preventDefault();try{const y=new URL(g.startsWith("http")?g:`https://${g}`);if(!["http:","https:"].includes(y.protocol)){console.error("Extension: Invalid URL protocol");return}const k=encodeURIComponent(H),a=encodeURIComponent(_);window.open(`${g}/?q=${k}&models=${a}`,"_blank"),e(12,H=""),e(0,o=!1)}catch{console.error("Extension: Invalid URL format")}},F=async x=>{x.preventDefault();try{const y=new URL(g.startsWith("http")?g:`https://${g}`);if(!["http:","https:"].includes(y.protocol)){console.error("Extension: Invalid URL protocol");return}}catch{console.error("Extension: Invalid URL format");return}if(!w||typeof w!="string"||w.trim().length===0){console.error("Extension: Invalid API key");return}if(!_||typeof _!="string"||_.trim().length===0){console.error("Extension: Invalid model");return}try{const y=await chrome.runtime.sendMessage({action:"encryptApiKey",apiKey:w.trim()});y.error?(console.error("Extension: Failed to encrypt API key:",y.error),chrome.storage.local.set({url:g.trim(),key:w.trim(),model:_.trim()})):chrome.storage.local.set({url:g.trim(),key:y.encrypted,model:_.trim()}).then(()=>{console.log("Value is set (API key encrypted)")})}catch(y){console.log(y)}e(1,n=!1)},Z=async()=>{try{const x=await chrome.runtime.sendMessage({action:"getSelection"});((x==null?void 0:x.data)??!1)&&e(12,H=x.data)}catch(x){console.log("catch",x)}e(0,o=!o),setTimeout(()=>{const x=document.getElementById("open-webui-search-input");x&&x.focus()},0)},ae=async()=>{var x,y;if(!g||d.length===0){console.warn("Extension: No conversation to continue or URL not configured");return}try{let k=g,a=w;try{const I=await chrome.storage.local.get(["url","key"]);if(I.url&&(k=I.url),I.key)try{const E=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:I.key});E.error?a=I.key:a=E.decrypted}catch{a=I.key}}catch(I){console.error("Extension: Error getting config:",I)}const A=d.filter(I=>I.role!=="system");if(A.length===0){console.warn("Extension: No messages to send");return}try{const I=await chrome.runtime.sendMessage({action:"createChat",url:k,api_key:a,body:{title:((y=(x=A[0])==null?void 0:x.content)==null?void 0:y.substring(0,50))||"Extension Conversation",messages:A}});if(I.data&&I.data.id){window.open(`${k}/chat/${I.data.id}`,"_blank");return}else I.error&&console.log("Extension: Could not create chat via API, trying URL parameters:",I.error)}catch(I){console.log("Extension: Could not create chat via API, trying URL parameters:",I)}const M=A.find(I=>I.role==="user");if(M){const I=encodeURIComponent(M.content);window.open(`${k}/?q=${I}`,"_blank")}else window.open(k,"_blank")}catch(k){console.error("Extension: Error continuing in OpenWebUI:",k);try{const a=await chrome.storage.local.get(["url"]);a.url&&window.open(a.url,"_blank")}catch(a){console.error("Extension: Could not open OpenWebUI:",a)}}},V=async()=>{var I;if(!f.trim()||m)return;const x=f.trim();e(5,f=""),s&&(d.some(v=>v.role==="assistant"&&v.content===s)||e(6,d=[...d,{role:"assistant",content:s}])),e(6,d=[...d,{role:"user",content:x}]),e(3,s=""),e(7,m=!0),setTimeout(()=>{const E=document.getElementById("open-webui-followup-input");E&&E.focus()},100);let y=g,k=w,a=_;try{const E=await chrome.storage.local.get(["url","key","model"]);if(E.url&&(y=E.url),E.model&&(a=E.model),E.key)try{const v=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:E.key});v.error?(console.error("Extension: Failed to decrypt API key:",v.error),k=E.key):k=v.decrypted}catch(v){console.error("Extension: Error decrypting API key:",v),k=E.key}}catch(E){E.message&&E.message.includes("Extension context invalidated")||console.log("Failed to get stored config:",E)}const M=(T.length>0?((I=T.find(E=>E.id===a))==null?void 0:I.owned_by)==="openai":!1)?`${y}/openai`:`${y}/ollama/v1`;try{const[E,v]=await Ue(k,{model:a,messages:d,stream:!0},M);if(E&&E.ok){const O=E.body.pipeThrough(new TextDecoderStream).pipeThrough(je(`
`)).getReader();for(;;){const{value:P,done:K}=await O.read();if(K)break;try{let pe=P.split(`
`);for(const se of pe)if(se!==""&&se!=="data: [DONE]"){let X=JSON.parse(se.replace(/^data: /,""));if(!("request_id"in X)){const Se=X.choices[0].delta.content??"";e(3,s+=Se),C&&setTimeout(()=>{e(14,C.scrollTop=C.scrollHeight,C)},0)}}}catch(pe){console.log(pe)}}try{s&&(d.some(K=>K.role==="assistant"&&K.content===s)||e(6,d=[...d,{role:"assistant",content:s}])),e(7,m=!1),e(3,s=""),setTimeout(()=>{const P=document.getElementById("open-webui-followup-input");P&&P.focus()},100)}catch(P){console.error("Extension: Error adding response to history:",P),e(7,m=!1)}}else console.error("Extension: API request failed:",E),e(7,m=!1)}catch(E){console.error("Extension: Error sending follow-up:",E);const v=(E==null?void 0:E.message)||String(E);if(v.includes("Rate limit exceeded")&&(e(8,b=v),e(9,h=!0),setTimeout(()=>{e(9,h=!1),e(8,b="")},5e3)),s&&m)try{d.some(P=>P.role==="assistant"&&P.content===s)||e(6,d=[...d,{role:"assistant",content:s}])}catch(O){console.error("Extension: Could not save response:",O)}e(7,m=!1)}};ut(async()=>{window.openWebUIToggleSearch=Z;const x=()=>{Z()};window.addEventListener("open-webui-toggle-search",x),chrome.runtime.onMessage.addListener((a,A,M)=>(console.log("Content script received message:",a),a.action==="toggleSearch"&&(console.log("Toggling search interface"),Z(),M({success:!0})),!0));const y=async a=>{var A;if(o&&a.shiftKey&&a.key==="Escape"?S():a.key==="Escape"&&(r?(e(2,r=!1),e(3,s=""),e(4,u=""),e(5,f=""),e(6,d=[]),e(7,m=!1)):e(0,o=!1)),a.key==="Enter"&&(a.metaKey||a.ctrlKey)&&(a.shiftKey||a.altKey)){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();let M=g,I=w,E=_;try{const v=await chrome.storage.local.get(["url","key","model"]);if(v.url&&(M=v.url,e(10,g=v.url)),v.model&&(E=v.model,e(15,_=v.model)),v.key)try{const O=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:v.key});O.error?(console.error("Extension: Failed to decrypt API key:",O.error),I=v.key,e(11,w=v.key)):(I=O.decrypted,e(11,w=O.decrypted))}catch(O){console.error("Extension: Error decrypting API key:",O),I=v.key,e(11,w=v.key)}}catch(v){v.message&&v.message.includes("Extension context invalidated")||console.log("Failed to get stored config:",v)}if(!M||!I||!E){console.warn("Extension: Missing configuration. Please configure the extension first.");return}try{const v=await chrome.runtime.sendMessage({action:"getSelection"});if((v==null?void 0:v.data)??!1){e(4,u=v.data),e(3,s=""),e(6,d=[{role:"system",content:"You are a helpful assistant."},{role:"user",content:v.data}]),e(2,r=!0),e(7,m=!0);const O=document.activeElement;let P=null;O&&(O.tagName==="INPUT"||O.tagName==="TEXTAREA")&&(P=O);let K=null;P&&(K=P.id||`open-webui-target-${Date.now()}`,P.id||(P.id=K));const se=(T.length>0?((A=T.find(Ee=>Ee.id===E))==null?void 0:A.owned_by)==="openai":!1)?`${M}/openai`:`${M}/ollama/v1`,[X,Se]=await Ue(I,{model:E,messages:d,stream:!0},se);if(X&&X.ok){const Ee=X.body.pipeThrough(new TextDecoderStream).pipeThrough(je(`
`)).getReader();let nt=!1;for(;;){const{value:G,done:me}=await Ee.read();if(me)break;try{let Ie=G.split(`
`);for(const he of Ie)if(he!=="")if(console.log(he),he==="data: [DONE]")console.log("DONE"),nt=!0;else{let ge=JSON.parse(he.replace(/^data: /,""));if(console.log(ge),"request_id"in ge)console.log(ge.request_id);else{const Ce=ge.choices[0].delta.content??"";e(3,s+=Ce),C&&setTimeout(()=>{e(14,C.scrollTop=C.scrollHeight,C)},0),K&&Ce&&await chrome.runtime.sendMessage({action:"writeText",text:Ce,targetId:K})}}}catch(Ie){console.log(Ie)}}try{s&&(d.some(me=>me.role==="assistant"&&me.content===s)||e(6,d=[...d,{role:"assistant",content:s}])),e(7,m=!1),e(3,s=""),setTimeout(()=>{const G=document.getElementById("open-webui-followup-input");G&&G.focus()},100)}catch(G){console.error("Extension: Error adding response to history:",G),e(7,m=!1)}}else console.error("Extension: API request failed:",X),e(2,r=!1),e(7,m=!1)}}catch(v){console.error("Extension: Error getting AI response:",v);const O=(v==null?void 0:v.message)||String(v);if(O.includes("Rate limit exceeded")&&(e(8,b=O),e(9,h=!0),e(2,r=!0),setTimeout(()=>{e(9,h=!1),e(8,b="")},5e3)),s&&m)try{d.some(K=>K.role==="assistant"&&K.content===s)||e(6,d=[...d,{role:"assistant",content:s}])}catch(P){console.error("Extension: Could not save response:",P)}e(7,m=!1)}}};document.addEventListener("keydown",y,{capture:!0,passive:!1});let k=null;try{k=await chrome.storage.local.get()}catch(a){console.log(a)}if(k){if(e(10,g=k.url??""),e(15,_=k.model??""),k.key)try{const a=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:k.key});a.error?(console.error("Extension: Failed to decrypt API key:",a.error),e(11,w=k.key)):e(11,w=a.decrypted)}catch(a){console.error("Extension: Error decrypting API key:",a),e(11,w=k.key)}else e(11,w="");if(k.url&&w&&k.model){e(1,n=!1);try{e(13,T=await He(w,k.url))}catch(a){const A=(a==null?void 0:a.message)||String(a);!A.includes("CORS")&&!A.includes("Failed to fetch")&&!A.includes("Rate limit exceeded")&&console.log("Failed to load models (non-critical):",a)}}else e(1,n=!0)}else e(1,n=!0);return()=>{document.removeEventListener("keydown",y),window.removeEventListener("open-webui-toggle-search",x),delete window.openWebUIToggleSearch}});function B(){g=this.value,e(10,g)}function q(){w=this.value,e(11,w)}const Q=async()=>{g.endsWith("/")&&e(10,g=g.slice(0,-1));try{e(13,T=await He(w,g)),e(9,h=!1),e(8,b="")}catch(x){const y=(x==null?void 0:x.message)||String(x);y.includes("Rate limit exceeded")?(e(8,b=y),e(9,h=!0),setTimeout(()=>{e(9,h=!1),e(8,b="")},5e3)):console.error("Extension: Error fetching models:",x)}};function ue(){_=ct(this),e(15,_),e(13,T)}function te(){H=this.value,e(12,H)}const fe=()=>{e(1,n=!0)},Y=()=>{e(0,o=!1)},re=()=>{e(2,r=!1),e(3,s=""),e(4,u=""),e(5,f=""),e(6,d=[]),e(7,m=!1)};function we(x){Ae[x?"unshift":"push"](()=>{C=x,e(14,C)})}function J(){f=this.value,e(5,f)}return[o,n,r,s,u,f,d,m,b,h,g,w,H,T,C,_,W,F,ae,V,B,q,Q,ue,te,fe,Y,re,we,J,()=>{const x=d.filter(y=>y.role!=="system").map(y=>`${y.role==="user"?"You":"Assistant"}: ${y.content}`).join(`

`);navigator.clipboard.writeText(x)},()=>{e(2,r=!1),e(3,s=""),e(4,u=""),e(5,f=""),e(6,d=[]),e(7,m=!1)}]}class Ot extends lt{constructor(l){super(),tt(this,l,St,Mt,Ye,{},null,[-1,-1])}}function Pt(t){let l,e,o;return e=new Ot({}),{c(){l=p("div"),yt(e.$$.fragment),i(l,"class","extension-container")},m(n,r){N(n,l,r),$e(e,l,null),o=!0},p:$,i(n){o||(Ge(e.$$.fragment,n),o=!0)},o(n){gt(e.$$.fragment,n),o=!1},d(n){n&&j(l),et(e)}}}class Rt extends lt{constructor(l){super(),tt(this,l,null,Pt,Ye,{})}}function ke(){const t=document.getElementById("extension-app");return t?new Rt({target:t}):(console.warn("Extension app target element not found, retrying..."),setTimeout(ke,100),null)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ke):ke();ke();
