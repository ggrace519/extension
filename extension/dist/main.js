var un=Object.defineProperty;var dn=(n,t,e)=>t in n?un(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var v=(n,t,e)=>dn(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function de(){}function Nt(n){return n()}function xt(){return Object.create(null)}function fe(n){n.forEach(Nt)}function qt(n){return typeof n=="function"}function jt(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function pn(n){return Object.keys(n).length===0}function k(n,t){n.appendChild(t)}function K(n,t,e){n.insertBefore(t,e||null)}function D(n){n.parentNode&&n.parentNode.removeChild(n)}function Ut(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function E(n){return document.createElement(n)}function ve(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function pe(n){return document.createTextNode(n)}function M(){return pe(" ")}function Zt(){return pe("")}function U(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function hn(n){return function(t){return t.preventDefault(),n.call(this,t)}}function f(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function fn(n){return Array.from(n.childNodes)}function at(n,t){t=""+t,n.data!==t&&(n.data=t)}function se(n,t){n.value=t??""}function bt(n,t,e){for(let s=0;s<n.options.length;s+=1){const r=n.options[s];if(r.__value===t){r.selected=!0;return}}(!e||t!==void 0)&&(n.selectedIndex=-1)}function gn(n){const t=n.querySelector(":checked");return t&&t.__value}class wn{constructor(t=!1){v(this,"is_svg",!1);v(this,"e");v(this,"n");v(this,"t");v(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,s=null){this.e||(this.is_svg?this.e=ve(e.nodeName):this.e=E(e.nodeType===11?"TEMPLATE":e.nodeName),this.t=e.tagName!=="TEMPLATE"?e:e.content,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)K(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(D)}}let Re;function Te(n){Re=n}function mn(){if(!Re)throw new Error("Function called outside component initialization");return Re}function kn(n){mn().$$.on_mount.push(n)}const ke=[],rt=[];let xe=[];const yt=[],xn=Promise.resolve();let st=!1;function bn(){st||(st=!0,xn.then(Dt))}function Ke(n){xe.push(n)}const nt=new Set;let me=0;function Dt(){if(me!==0)return;const n=Re;do{try{for(;me<ke.length;){const t=ke[me];me++,Te(t),yn(t.$$)}}catch(t){throw ke.length=0,me=0,t}for(Te(null),ke.length=0,me=0;rt.length;)rt.pop()();for(let t=0;t<xe.length;t+=1){const e=xe[t];nt.has(e)||(nt.add(e),e())}xe.length=0}while(ke.length);for(;yt.length;)yt.pop()();st=!1,nt.clear(),Te(n)}function yn(n){if(n.fragment!==null){n.update(),fe(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Ke)}}function _n(n){const t=[],e=[];xe.forEach(s=>n.indexOf(s)===-1?t.push(s):e.push(s)),e.forEach(s=>s()),xe=t}const De=new Set;let En;function Kt(n,t){n&&n.i&&(De.delete(n),n.i(t))}function An(n,t,e,s){if(n&&n.o){if(De.has(n))return;De.add(n),En.c.push(()=>{De.delete(n)}),n.o(t)}}function Fe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Sn(n){n&&n.c()}function Ft(n,t,e){const{fragment:s,after_update:r}=n.$$;s&&s.m(t,e),Ke(()=>{const l=n.$$.on_mount.map(Nt).filter(qt);n.$$.on_destroy?n.$$.on_destroy.push(...l):fe(l),n.$$.on_mount=[]}),r.forEach(Ke)}function Wt(n,t){const e=n.$$;e.fragment!==null&&(_n(e.after_update),fe(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Tn(n,t){n.$$.dirty[0]===-1&&(ke.push(n),bn(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Qt(n,t,e,s,r,l,a=null,o=[-1]){const u=Re;Te(n);const i=n.$$={fragment:null,ctx:[],props:l,update:de,not_equal:r,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:xt(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};a&&a(i.root);let d=!1;if(i.ctx=e?e(n,t.props||{},(g,h,...p)=>{const w=p.length?p[0]:h;return i.ctx&&r(i.ctx[g],i.ctx[g]=w)&&(!i.skip_bound&&i.bound[g]&&i.bound[g](w),d&&Tn(n,g)),h}):[],i.update(),d=!0,fe(i.before_update),i.fragment=s?s(i.ctx):!1,t.target){if(t.hydrate){const g=fn(t.target);i.fragment&&i.fragment.l(g),g.forEach(D)}else i.fragment&&i.fragment.c();t.intro&&Kt(n.$$.fragment),Ft(n,t.target,t.anchor),Dt()}Te(u)}class Gt{constructor(){v(this,"$$");v(this,"$$set")}$destroy(){Wt(this,1),this.$destroy=de}$on(t,e){if(!qt(e))return de;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!pn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const In="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(In);const Yt=()=>{try{return typeof chrome<"u"&&chrome!==null&&typeof chrome.runtime<"u"&&chrome.runtime!==null&&typeof chrome.runtime.sendMessage<"u"}catch{return!1}},_t=async(n,t)=>Yt()?new Promise((e,s)=>{chrome.runtime.sendMessage({action:"fetchModels",url:t,key:n},r=>{var a;if(chrome.runtime.lastError){s(new Error(chrome.runtime.lastError.message));return}if(r.error){s(r.error);return}let l=((a=r.data)==null?void 0:a.data)??[];l=l.filter(o=>o).sort((o,u)=>{const i=o.name.toLowerCase(),d=u.name.toLowerCase();return i<d?-1:i>d?1:o<u?-1:o>u?1:0}),l.length>0&&console.debug(`Extension: Loaded ${l.length} model(s)`),e(l)})}):Promise.reject(new Error("Extension context invalidated - Chrome APIs not available")),qe=async(n="",t={},e="http://localhost:8080")=>!Yt()||typeof chrome.runtime.connect>"u"?Promise.reject(new Error("Extension context invalidated - Chrome runtime.connect not available")):new Promise((s,r)=>{const l=chrome.runtime.connect({name:"chat-stream"});let a=null,o=!1;const u=new ReadableStream({start(d){a=d}});l.onMessage.addListener(d=>{if(d.error){a&&a.error(new Error(d.error)),l.disconnect(),r(new Error(d.error));return}if(d.done){o=!0,a&&a.close(),l.disconnect();return}d.chunk&&a&&a.enqueue(new TextEncoder().encode(d.chunk))}),l.onDisconnect.addListener(()=>{!o&&a&&a.error(new Error("Stream disconnected unexpectedly"))});const i={ok:!0,status:200,body:u};l.postMessage({action:"fetchChatCompletion",url:e,api_key:n,body:t}),s([i,{abort:()=>{l.disconnect()}}])});function ct(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ge=ct();function Xt(n){ge=n}var Ie={exec:()=>null};function z(n,t=""){let e=typeof n=="string"?n:n.source,s={replace:(r,l)=>{let a=typeof l=="string"?l:l.source;return a=a.replace(Q.caret,"$1"),e=e.replace(r,a),s},getRegex:()=>new RegExp(e,t)};return s}var vn=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Q={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},Rn=/^(?:[ \t]*(?:\n|$))+/,Cn=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Pn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ce=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ut=/(?:[*+-]|\d{1,9}[.)])/,Vt=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Jt=z(Vt).replace(/bull/g,ut).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ln=z(Vt).replace(/bull/g,ut).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),dt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Mn=/^[^\n]+/,pt=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,On=z(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",pt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Bn=z(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ut).getRegex(),Ve="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ht=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Hn=z("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ht).replace("tag",Ve).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$t=z(dt).replace("hr",Ce).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve).getRegex(),Nn=z(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$t).getRegex(),ft={blockquote:Nn,code:Cn,def:On,fences:Pn,heading:zn,hr:Ce,html:Hn,lheading:Jt,list:Bn,newline:Rn,paragraph:$t,table:Ie,text:Mn},Et=z("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ce).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve).getRegex(),qn={...ft,lheading:Ln,table:Et,paragraph:z(dt).replace("hr",Ce).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Et).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve).getRegex()},jn={...ft,html:z(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ht).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ie,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:z(dt).replace("hr",Ce).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Jt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Un=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Zn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,en=/^( {2,}|\\)\n(?!\s*$)/,Dn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Je=/[\p{P}\p{S}]/u,gt=/[\s\p{P}\p{S}]/u,tn=/[^\s\p{P}\p{S}]/u,Kn=z(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,gt).getRegex(),nn=/(?!~)[\p{P}\p{S}]/u,Fn=/(?!~)[\s\p{P}\p{S}]/u,Wn=/(?:[^\s\p{P}\p{S}]|~)/u,Qn=z(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",vn?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),rn=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Gn=z(rn,"u").replace(/punct/g,Je).getRegex(),Yn=z(rn,"u").replace(/punct/g,nn).getRegex(),sn="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Xn=z(sn,"gu").replace(/notPunctSpace/g,tn).replace(/punctSpace/g,gt).replace(/punct/g,Je).getRegex(),Vn=z(sn,"gu").replace(/notPunctSpace/g,Wn).replace(/punctSpace/g,Fn).replace(/punct/g,nn).getRegex(),Jn=z("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,tn).replace(/punctSpace/g,gt).replace(/punct/g,Je).getRegex(),$n=z(/\\(punct)/,"gu").replace(/punct/g,Je).getRegex(),er=z(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),tr=z(ht).replace("(?:-->|$)","-->").getRegex(),nr=z("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",tr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),We=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,rr=z(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",We).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ln=z(/^!?\[(label)\]\[(ref)\]/).replace("label",We).replace("ref",pt).getRegex(),on=z(/^!?\[(ref)\](?:\[\])?/).replace("ref",pt).getRegex(),sr=z("reflink|nolink(?!\\()","g").replace("reflink",ln).replace("nolink",on).getRegex(),At=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,wt={_backpedal:Ie,anyPunctuation:$n,autolink:er,blockSkip:Qn,br:en,code:Zn,del:Ie,emStrongLDelim:Gn,emStrongRDelimAst:Xn,emStrongRDelimUnd:Jn,escape:Un,link:rr,nolink:on,punctuation:Kn,reflink:ln,reflinkSearch:sr,tag:nr,text:Dn,url:Ie},lr={...wt,link:z(/^!?\[(label)\]\((.*?)\)/).replace("label",We).getRegex(),reflink:z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",We).getRegex()},lt={...wt,emStrongRDelimAst:Vn,emStrongLDelim:Yn,url:z(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",At).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:z(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",At).getRegex()},or={...lt,br:z(en).replace("{2,}","*").getRegex(),text:z(lt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},je={normal:ft,gfm:qn,pedantic:jn},Ee={normal:wt,gfm:lt,breaks:or,pedantic:lr},ir={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},St=n=>ir[n];function oe(n,t){if(t){if(Q.escapeTest.test(n))return n.replace(Q.escapeReplace,St)}else if(Q.escapeTestNoEncode.test(n))return n.replace(Q.escapeReplaceNoEncode,St);return n}function Tt(n){try{n=encodeURI(n).replace(Q.percentDecode,"%")}catch{return null}return n}function It(n,t){var l;let e=n.replace(Q.findPipe,(a,o,u)=>{let i=!1,d=o;for(;--d>=0&&u[d]==="\\";)i=!i;return i?"|":" |"}),s=e.split(Q.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!((l=s.at(-1))!=null&&l.trim())&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(Q.slashPipe,"|");return s}function Ae(n,t,e){let s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===t;)r++;return n.slice(0,s-r)}function ar(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===t[0])e++;else if(n[s]===t[1]&&(e--,e<0))return s;return e>0?-2:-1}function vt(n,t,e,s,r){let l=t.href,a=t.title||null,o=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let u={type:n[0].charAt(0)==="!"?"image":"link",raw:e,href:l,title:a,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,u}function cr(n,t,e){let s=n.match(e.other.indentCodeCompensation);if(s===null)return t;let r=s[1];return t.split(`
`).map(l=>{let a=l.match(e.other.beginningSpace);if(a===null)return l;let[o]=a;return o.length>=r.length?l.slice(r.length):l}).join(`
`)}var Qe=class{constructor(n){v(this,"options");v(this,"rules");v(this,"lexer");this.options=n||ge}space(n){let t=this.rules.block.newline.exec(n);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(n){let t=this.rules.block.code.exec(n);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ae(e,`
`)}}}fences(n){let t=this.rules.block.fences.exec(n);if(t){let e=t[0],s=cr(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(n){let t=this.rules.block.heading.exec(n);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let s=Ae(e,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(e=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(n){let t=this.rules.block.hr.exec(n);if(t)return{type:"hr",raw:Ae(t[0],`
`)}}blockquote(n){let t=this.rules.block.blockquote.exec(n);if(t){let e=Ae(t[0],`
`).split(`
`),s="",r="",l=[];for(;e.length>0;){let a=!1,o=[],u;for(u=0;u<e.length;u++)if(this.rules.other.blockquoteStart.test(e[u]))o.push(e[u]),a=!0;else if(!a)o.push(e[u]);else break;e=e.slice(u);let i=o.join(`
`),d=i.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${i}`:i,r=r?`${r}
${d}`:d;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,l,!0),this.lexer.state.top=g,e.length===0)break;let h=l.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){let p=h,w=p.raw+`
`+e.join(`
`),x=this.blockquote(w);l[l.length-1]=x,s=s.substring(0,s.length-p.raw.length)+x.raw,r=r.substring(0,r.length-p.text.length)+x.text;break}else if((h==null?void 0:h.type)==="list"){let p=h,w=p.raw+`
`+e.join(`
`),x=this.list(w);l[l.length-1]=x,s=s.substring(0,s.length-h.raw.length)+x.raw,r=r.substring(0,r.length-p.raw.length)+x.raw,e=w.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:l,text:r}}}list(n){let t=this.rules.block.list.exec(n);if(t){let e=t[1].trim(),s=e.length>1,r={type:"list",raw:"",ordered:s,start:s?+e.slice(0,-1):"",loose:!1,items:[]};e=s?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=s?e:"[*+-]");let l=this.rules.other.listItemRegex(e),a=!1;for(;n;){let u=!1,i="",d="";if(!(t=l.exec(n))||this.rules.block.hr.test(n))break;i=t[0],n=n.substring(i.length);let g=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,B=>" ".repeat(3*B.length)),h=n.split(`
`,1)[0],p=!g.trim(),w=0;if(this.options.pedantic?(w=2,d=g.trimStart()):p?w=t[1].length+1:(w=t[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,d=g.slice(w),w+=t[1].length),p&&this.rules.other.blankLine.test(h)&&(i+=h+`
`,n=n.substring(h.length+1),u=!0),!u){let B=this.rules.other.nextBulletRegex(w),R=this.rules.other.hrRegex(w),S=this.rules.other.fencesBeginRegex(w),H=this.rules.other.headingBeginRegex(w),V=this.rules.other.htmlBeginRegex(w);for(;n;){let J=n.split(`
`,1)[0],G;if(h=J,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),G=h):G=h.replace(this.rules.other.tabCharGlobal,"    "),S.test(h)||H.test(h)||V.test(h)||B.test(h)||R.test(h))break;if(G.search(this.rules.other.nonSpaceChar)>=w||!h.trim())d+=`
`+G.slice(w);else{if(p||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(g)||H.test(g)||R.test(g))break;d+=`
`+h}!p&&!h.trim()&&(p=!0),i+=J+`
`,n=n.substring(J.length+1),g=G.slice(w)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(i)&&(a=!0));let x=null;this.options.gfm&&(x=this.rules.other.listIsTask.exec(d),x&&(d=d.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:i,task:!!x,loose:!1,text:d,tokens:[]}),r.raw+=i}let o=r.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let u of r.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){let i=this.rules.other.listTaskCheckbox.exec(u.raw);if(i){let d={type:"checkbox",raw:i[0]+" ",checked:i[0]!=="[ ]"};u.checked=d.checked,r.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=d.raw+u.tokens[0].raw,u.tokens[0].text=d.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(d)):u.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):u.tokens.unshift(d)}}if(!r.loose){let i=u.tokens.filter(g=>g.type==="space"),d=i.length>0&&i.some(g=>this.rules.other.anyLine.test(g.raw));r.loose=d}}if(r.loose)for(let u of r.items){u.loose=!0;for(let i of u.tokens)i.type==="text"&&(i.type="paragraph")}return r}}html(n){let t=this.rules.block.html.exec(n);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(n){let t=this.rules.block.def.exec(n);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:s,title:r}}}table(n){var a;let t=this.rules.block.table.exec(n);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=It(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===s.length){for(let o of s)this.rules.other.tableAlignRight.test(o)?l.align.push("right"):this.rules.other.tableAlignCenter.test(o)?l.align.push("center"):this.rules.other.tableAlignLeft.test(o)?l.align.push("left"):l.align.push(null);for(let o=0;o<e.length;o++)l.header.push({text:e[o],tokens:this.lexer.inline(e[o]),header:!0,align:l.align[o]});for(let o of r)l.rows.push(It(o,l.header.length).map((u,i)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:l.align[i]})));return l}}lheading(n){let t=this.rules.block.lheading.exec(n);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(n){let t=this.rules.block.paragraph.exec(n);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(n){let t=this.rules.block.text.exec(n);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(n){let t=this.rules.inline.escape.exec(n);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(n){let t=this.rules.inline.tag.exec(n);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(n){let t=this.rules.inline.link.exec(n);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let l=Ae(e.slice(0,-1),"\\");if((e.length-l.length)%2===0)return}else{let l=ar(t[2],"()");if(l===-2)return;if(l>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+l;t[2]=t[2].substring(0,l),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],r="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(s);l&&(s=l[1],r=l[3])}else r=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?s=s.slice(1):s=s.slice(1,-1)),vt(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(n,t){let e;if((e=this.rules.inline.reflink.exec(n))||(e=this.rules.inline.nolink.exec(n))){let s=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[s.toLowerCase()];if(!r){let l=e[0].charAt(0);return{type:"text",raw:l,text:l}}return vt(e,r,e[0],this.lexer,this.rules)}}emStrong(n,t,e=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!e||this.rules.inline.punctuation.exec(e))){let r=[...s[0]].length-1,l,a,o=r,u=0,i=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(i.lastIndex=0,t=t.slice(-1*n.length+r);(s=i.exec(t))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(a=[...l].length,s[3]||s[4]){o+=a;continue}else if((s[5]||s[6])&&r%3&&!((r+a)%3)){u+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o+u);let d=[...s[0]][0].length,g=n.slice(0,r+s.index+d+a);if(Math.min(r,a)%2){let p=g.slice(1,-1);return{type:"em",raw:g,text:p,tokens:this.lexer.inlineTokens(p)}}let h=g.slice(2,-2);return{type:"strong",raw:g,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let t=this.rules.inline.code.exec(n);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return s&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(n){let t=this.rules.inline.br.exec(n);if(t)return{type:"br",raw:t[0]}}del(n){let t=this.rules.inline.del.exec(n);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(n){let t=this.rules.inline.autolink.exec(n);if(t){let e,s;return t[2]==="@"?(e=t[1],s="mailto:"+e):(e=t[1],s=e),{type:"link",raw:t[0],text:e,href:s,tokens:[{type:"text",raw:e,text:e}]}}}url(n){var e;let t;if(t=this.rules.inline.url.exec(n)){let s,r;if(t[2]==="@")s=t[0],r="mailto:"+s;else{let l;do l=t[0],t[0]=((e=this.rules.inline._backpedal.exec(t[0]))==null?void 0:e[0])??"";while(l!==t[0]);s=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n){let t=this.rules.inline.text.exec(n);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},ne=class ot{constructor(t){v(this,"tokens");v(this,"options");v(this,"state");v(this,"tokenizer");v(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ge,this.options.tokenizer=this.options.tokenizer||new Qe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:Q,block:je.normal,inline:Ee.normal};this.options.pedantic?(e.block=je.pedantic,e.inline=Ee.pedantic):this.options.gfm&&(e.block=je.gfm,this.options.breaks?e.inline=Ee.breaks:e.inline=Ee.gfm),this.tokenizer.rules=e}static get rules(){return{block:je,inline:Ee}}static lex(t,e){return new ot(e).lex(t)}static lexInline(t,e){return new ot(e).inlineTokens(t)}lex(t){t=t.replace(Q.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let s=this.inlineQueue[e];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],s=!1){var r,l,a;for(this.options.pedantic&&(t=t.replace(Q.tabCharGlobal,"    ").replace(Q.spaceLine,""));t;){let o;if((l=(r=this.options.extensions)==null?void 0:r.block)!=null&&l.some(i=>(o=i.call({lexer:this},t,e))?(t=t.substring(o.raw.length),e.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let i=e.at(-1);o.raw.length===1&&i!==void 0?i.raw+=`
`:e.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let i=e.at(-1);(i==null?void 0:i.type)==="paragraph"||(i==null?void 0:i.type)==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.at(-1).src=i.text):e.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let i=e.at(-1);(i==null?void 0:i.type)==="paragraph"||(i==null?void 0:i.type)==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},e.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),e.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),e.push(o);continue}let u=t;if((a=this.options.extensions)!=null&&a.startBlock){let i=1/0,d=t.slice(1),g;this.options.extensions.startBlock.forEach(h=>{g=h.call({lexer:this},d),typeof g=="number"&&g>=0&&(i=Math.min(i,g))}),i<1/0&&i>=0&&(u=t.substring(0,i+1))}if(this.state.top&&(o=this.tokenizer.paragraph(u))){let i=e.at(-1);s&&(i==null?void 0:i.type)==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):e.push(o),s=u.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let i=e.at(-1);(i==null?void 0:i.type)==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+o.raw,i.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):e.push(o);continue}if(t){let i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){var u,i,d,g,h;let s=t,r=null;if(this.tokens.links){let p=Object.keys(this.tokens.links);if(p.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)p.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)l=r[2]?r[2].length:0,s=s.slice(0,r.index+l)+"["+"a".repeat(r[0].length-l-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=((i=(u=this.options.hooks)==null?void 0:u.emStrongMask)==null?void 0:i.call({lexer:this},s))??s;let a=!1,o="";for(;t;){a||(o=""),a=!1;let p;if((g=(d=this.options.extensions)==null?void 0:d.inline)!=null&&g.some(x=>(p=x.call({lexer:this},t,e))?(t=t.substring(p.raw.length),e.push(p),!0):!1))continue;if(p=this.tokenizer.escape(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.tag(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.link(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(p.raw.length);let x=e.at(-1);p.type==="text"&&(x==null?void 0:x.type)==="text"?(x.raw+=p.raw,x.text+=p.text):e.push(p);continue}if(p=this.tokenizer.emStrong(t,s,o)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.codespan(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.br(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.del(t)){t=t.substring(p.raw.length),e.push(p);continue}if(p=this.tokenizer.autolink(t)){t=t.substring(p.raw.length),e.push(p);continue}if(!this.state.inLink&&(p=this.tokenizer.url(t))){t=t.substring(p.raw.length),e.push(p);continue}let w=t;if((h=this.options.extensions)!=null&&h.startInline){let x=1/0,B=t.slice(1),R;this.options.extensions.startInline.forEach(S=>{R=S.call({lexer:this},B),typeof R=="number"&&R>=0&&(x=Math.min(x,R))}),x<1/0&&x>=0&&(w=t.substring(0,x+1))}if(p=this.tokenizer.inlineText(w)){t=t.substring(p.raw.length),p.raw.slice(-1)!=="_"&&(o=p.raw.slice(-1)),a=!0;let x=e.at(-1);(x==null?void 0:x.type)==="text"?(x.raw+=p.raw,x.text+=p.text):e.push(p);continue}if(t){let x="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(x);break}else throw new Error(x)}}return e}},Ge=class{constructor(n){v(this,"options");v(this,"parser");this.options=n||ge}space(n){return""}code({text:n,lang:t,escaped:e}){var l;let s=(l=(t||"").match(Q.notSpaceStart))==null?void 0:l[0],r=n.replace(Q.endingNewline,"")+`
`;return s?'<pre><code class="language-'+oe(s)+'">'+(e?r:oe(r,!0))+`</code></pre>
`:"<pre><code>"+(e?r:oe(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:t}){return`<h${t}>${this.parser.parseInline(n)}</h${t}>
`}hr(n){return`<hr>
`}list(n){let t=n.ordered,e=n.start,s="";for(let a=0;a<n.items.length;a++){let o=n.items[a];s+=this.listitem(o)}let r=t?"ol":"ul",l=t&&e!==1?' start="'+e+'"':"";return"<"+r+l+`>
`+s+"</"+r+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let t="",e="";for(let r=0;r<n.header.length;r++)e+=this.tablecell(n.header[r]);t+=this.tablerow({text:e});let s="";for(let r=0;r<n.rows.length;r++){let l=n.rows[r];e="";for(let a=0;a<l.length;a++)e+=this.tablecell(l[a]);s+=this.tablerow({text:e})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let t=this.parser.parseInline(n.tokens),e=n.header?"th":"td";return(n.align?`<${e} align="${n.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${oe(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:t,tokens:e}){let s=this.parser.parseInline(e),r=Tt(n);if(r===null)return s;n=r;let l='<a href="'+n+'"';return t&&(l+=' title="'+oe(t)+'"'),l+=">"+s+"</a>",l}image({href:n,title:t,text:e,tokens:s}){s&&(e=this.parser.parseInline(s,this.parser.textRenderer));let r=Tt(n);if(r===null)return oe(e);n=r;let l=`<img src="${n}" alt="${e}"`;return t&&(l+=` title="${oe(t)}"`),l+=">",l}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:oe(n.text)}},mt=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},re=class it{constructor(t){v(this,"options");v(this,"renderer");v(this,"textRenderer");this.options=t||ge,this.options.renderer=this.options.renderer||new Ge,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new mt}static parse(t,e){return new it(e).parse(t)}static parseInline(t,e){return new it(e).parseInline(t)}parse(t){var s,r;let e="";for(let l=0;l<t.length;l++){let a=t[l];if((r=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&r[a.type]){let u=a,i=this.options.extensions.renderers[u.type].call({parser:this},u);if(i!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(u.type)){e+=i||"";continue}}let o=a;switch(o.type){case"space":{e+=this.renderer.space(o);break}case"hr":{e+=this.renderer.hr(o);break}case"heading":{e+=this.renderer.heading(o);break}case"code":{e+=this.renderer.code(o);break}case"table":{e+=this.renderer.table(o);break}case"blockquote":{e+=this.renderer.blockquote(o);break}case"list":{e+=this.renderer.list(o);break}case"checkbox":{e+=this.renderer.checkbox(o);break}case"html":{e+=this.renderer.html(o);break}case"def":{e+=this.renderer.def(o);break}case"paragraph":{e+=this.renderer.paragraph(o);break}case"text":{e+=this.renderer.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return e}parseInline(t,e=this.renderer){var r,l;let s="";for(let a=0;a<t.length;a++){let o=t[a];if((l=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&l[o.type]){let i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){s+=i||"";continue}}let u=o;switch(u.type){case"escape":{s+=e.text(u);break}case"html":{s+=e.html(u);break}case"link":{s+=e.link(u);break}case"image":{s+=e.image(u);break}case"checkbox":{s+=e.checkbox(u);break}case"strong":{s+=e.strong(u);break}case"em":{s+=e.em(u);break}case"codespan":{s+=e.codespan(u);break}case"br":{s+=e.br(u);break}case"del":{s+=e.del(u);break}case"text":{s+=e.text(u);break}default:{let i='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return s}},Ze,Se=(Ze=class{constructor(n){v(this,"options");v(this,"block");this.options=n||ge}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?ne.lex:ne.lexInline}provideParser(){return this.block?re.parse:re.parseInline}},v(Ze,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),v(Ze,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Ze),ur=class{constructor(...n){v(this,"defaults",ct());v(this,"options",this.setOptions);v(this,"parse",this.parseMarkdown(!0));v(this,"parseInline",this.parseMarkdown(!1));v(this,"Parser",re);v(this,"Renderer",Ge);v(this,"TextRenderer",mt);v(this,"Lexer",ne);v(this,"Tokenizer",Qe);v(this,"Hooks",Se);this.use(...n)}walkTokens(n,t){var s,r;let e=[];for(let l of n)switch(e=e.concat(t.call(this,l)),l.type){case"table":{let a=l;for(let o of a.header)e=e.concat(this.walkTokens(o.tokens,t));for(let o of a.rows)for(let u of o)e=e.concat(this.walkTokens(u.tokens,t));break}case"list":{let a=l;e=e.concat(this.walkTokens(a.items,t));break}default:{let a=l;(r=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(o=>{let u=a[o].flat(1/0);e=e.concat(this.walkTokens(u,t))}):a.tokens&&(e=e.concat(this.walkTokens(a.tokens,t)))}}return e}use(...n){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(e=>{let s={...e};if(s.async=this.defaults.async||s.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let l=t.renderers[r.name];l?t.renderers[r.name]=function(...a){let o=r.renderer.apply(this,a);return o===!1&&(o=l.apply(this,a)),o}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=t[r.level];l?l.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),s.extensions=t),e.renderer){let r=this.defaults.renderer||new Ge(this.defaults);for(let l in e.renderer){if(!(l in r))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let a=l,o=e.renderer[a],u=r[a];r[a]=(...i)=>{let d=o.apply(r,i);return d===!1&&(d=u.apply(r,i)),d||""}}s.renderer=r}if(e.tokenizer){let r=this.defaults.tokenizer||new Qe(this.defaults);for(let l in e.tokenizer){if(!(l in r))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let a=l,o=e.tokenizer[a],u=r[a];r[a]=(...i)=>{let d=o.apply(r,i);return d===!1&&(d=u.apply(r,i)),d}}s.tokenizer=r}if(e.hooks){let r=this.defaults.hooks||new Se;for(let l in e.hooks){if(!(l in r))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let a=l,o=e.hooks[a],u=r[a];Se.passThroughHooks.has(l)?r[a]=i=>{if(this.defaults.async&&Se.passThroughHooksRespectAsync.has(l))return(async()=>{let g=await o.call(r,i);return u.call(r,g)})();let d=o.call(r,i);return u.call(r,d)}:r[a]=(...i)=>{if(this.defaults.async)return(async()=>{let g=await o.apply(r,i);return g===!1&&(g=await u.apply(r,i)),g})();let d=o.apply(r,i);return d===!1&&(d=u.apply(r,i)),d}}s.hooks=r}if(e.walkTokens){let r=this.defaults.walkTokens,l=e.walkTokens;s.walkTokens=function(a){let o=[];return o.push(l.call(this,a)),r&&(o=o.concat(r.call(this,a))),o}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,t){return ne.lex(n,t??this.defaults)}parser(n,t){return re.parse(n,t??this.defaults)}parseMarkdown(n){return(t,e)=>{let s={...e},r={...this.defaults,...s},l=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(t):t,o=await(r.hooks?await r.hooks.provideLexer():n?ne.lex:ne.lexInline)(a,r),u=r.hooks?await r.hooks.processAllTokens(o):o;r.walkTokens&&await Promise.all(this.walkTokens(u,r.walkTokens));let i=await(r.hooks?await r.hooks.provideParser():n?re.parse:re.parseInline)(u,r);return r.hooks?await r.hooks.postprocess(i):i})().catch(l);try{r.hooks&&(t=r.hooks.preprocess(t));let a=(r.hooks?r.hooks.provideLexer():n?ne.lex:ne.lexInline)(t,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let o=(r.hooks?r.hooks.provideParser():n?re.parse:re.parseInline)(a,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(a){return l(a)}}}onError(n,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+oe(e.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(e);throw e}}},he=new ur;function L(n,t){return he.parse(n,t)}L.options=L.setOptions=function(n){return he.setOptions(n),L.defaults=he.defaults,Xt(L.defaults),L};L.getDefaults=ct;L.defaults=ge;L.use=function(...n){return he.use(...n),L.defaults=he.defaults,Xt(L.defaults),L};L.walkTokens=function(n,t){return he.walkTokens(n,t)};L.parseInline=he.parseInline;L.Parser=re;L.parser=re.parse;L.Renderer=Ge;L.TextRenderer=mt;L.Lexer=ne;L.lexer=ne.lex;L.Tokenizer=Qe;L.Hooks=Se;L.parse=L;L.options;L.setOptions;L.use;L.walkTokens;L.parseInline;re.parse;ne.lex;const Ue=n=>{let t="";return new TransformStream({transform(e,s){t+=e;const r=t.split(n);r.slice(0,-1).forEach(l=>s.enqueue(l)),t=r[r.length-1]},flush(e){t&&e.enqueue(t)}})};L.setOptions({breaks:!0,gfm:!0,headerIds:!1,mangle:!1});const Ye=n=>{if(!n)return"";try{return L.parse(n)}catch(t){return console.error("Error rendering markdown:",t),n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};function Rt(n,t,e){const s=n.slice();return s[37]=t[e],s[39]=e,s}function Ct(n,t,e){const s=n.slice();return s[15]=t[e],s}function Pt(n){let t,e,s;function r(o,u){return o[1]?pr:dr}let l=r(n),a=l(n);return{c(){t=E("div"),a.c(),f(t,"class","tlwd-fixed tlwd-top-0 tlwd-right-0 tlwd-left-0 tlwd-bottom-0 tlwd-w-full tlwd-min-h-screen tlwd-h-screen tlwd-flex tlwd-justify-center tlwd-z-[9999999999] tlwd-overflow-hidden tlwd-overscroll-contain")},m(o,u){K(o,t,u),a.m(t,null),e||(s=U(t,"mousedown",n[26]),e=!0)},p(o,u){l===(l=r(o))&&a?a.p(o,u):(a.d(1),a=l(o),a&&(a.c(),a.m(t,null)))},d(o){o&&D(t),a.d(),e=!1,s()}}}function dr(n){let t,e,s,r,l,a,o,u,i,d,g,h,p,w;return{c(){t=E("div"),e=E("div"),s=E("form"),r=E("div"),l=E("div"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path></svg>`,a=M(),o=E("input"),u=M(),i=E("div"),d=E("div"),d.textContent="Press âŒ˜Space+Shift to toggle",g=M(),h=E("button"),h.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-3"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>`,f(l,"class","tlwd-flex tlwd-items-center"),f(o,"id","open-webui-search-input"),f(o,"placeholder","Search Open WebUI"),f(o,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),f(o,"autocomplete","one-time-code"),f(r,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full"),f(d,"class","tlwd-text-right tlwd-text-[0.7rem] tlwd-p-0 tlwd-m-0 tlwd-text-neutral-300 tlwd-h-fit"),f(h,"class","tlwd-h-fit tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-0 tlwd-m-0 tlwd-outline-none tlwd-border-none"),f(h,"type","button"),f(i,"class","tlwd-flex tlwd-justify-end tlwd-gap-1 tlwd-items-center"),f(s,"class","tlwd-text-neutral-100 tlwd-w-full tlwd-p-0 tlwd-m-0"),f(s,"autocomplete","off"),f(s,"enctype","application/x-www-form-urlencoded"),f(e,"class","tlwd-w-full tlwd-flex tlwd-flex-col tlwd-justify-between tlwd-py-2.5 tlwd-px-3.5 tlwd-rounded-2xl tlwd-outline tlwd-outline-1 tlwd-outline-gray-850 tlwd-backdrop-blur-3xl tlwd-bg-gray-850/70 shadow-4xl modal-animation"),f(t,"class","tlwd-m-auto tlwd-max-w-xl tlwd-w-full tlwd-pb-32")},m(x,B){K(x,t,B),k(t,e),k(e,s),k(s,r),k(r,l),k(r,a),k(r,o),se(o,n[12]),k(s,u),k(s,i),k(i,d),k(i,g),k(i,h),p||(w=[U(o,"input",n[24]),U(h,"click",n[25]),U(s,"submit",n[16]),U(s,"mousedown",xr)],p=!0)},p(x,B){B[0]&4096&&o.value!==x[12]&&se(o,x[12])},d(x){x&&D(t),p=!1,fe(w)}}}function pr(n){let t,e,s,r,l,a,o,u,i,d,g,h,p,w,x,B,R,S=n[13]&&n[13].length>0&&zt(n);return{c(){t=E("div"),e=E("div"),s=E("form"),r=E("div"),l=E("div"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"></path></svg>`,a=M(),o=E("input"),u=M(),i=E("div"),d=E("div"),d.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"></path></svg>`,g=M(),h=E("input"),p=M(),w=E("button"),w.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg>`,x=M(),S&&S.c(),f(l,"class","tlwd-flex tlwd-items-center"),f(o,"id","open-webui-url-input"),f(o,"placeholder","Open WebUI URL"),f(o,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),f(o,"autocomplete","one-time-code"),o.required=!0,f(r,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full"),f(d,"class","tlwd-flex tlwd-items-center"),f(h,"placeholder","Open WebUI API Key"),f(h,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),f(h,"autocomplete","one-time-code"),h.required=!0,f(w,"class","tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-0 tlwd-m-0 tlwd-outline-none tlwd-border-none"),f(w,"type","button"),f(i,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full tlwd-mt-2"),f(s,"class","tlwd-text-neutral-100 tlwd-w-full tlwd-p-0 tlwd-m-0"),f(s,"autocomplete","off"),f(s,"enctype","application/x-www-form-urlencoded"),f(e,"class","tlwd-w-full tlwd-flex tlwd-flex-col tlwd-justify-between tlwd-py-2.5 tlwd-px-3.5 tlwd-rounded-2xl tlwd-outline tlwd-outline-1 tlwd-outline-gray-850 tlwd-backdrop-blur-3xl tlwd-bg-gray-850/70 shadow-4xl modal-animation"),f(t,"class","tlwd-m-auto tlwd-max-w-sm tlwd-w-full tlwd-pb-32")},m(H,V){K(H,t,V),k(t,e),k(e,s),k(s,r),k(r,l),k(r,a),k(r,o),se(o,n[10]),k(s,u),k(s,i),k(i,d),k(i,g),k(i,h),se(h,n[11]),k(i,p),k(i,w),k(s,x),S&&S.m(s,null),B||(R=[U(o,"input",n[20]),U(h,"input",n[21]),U(w,"click",n[22]),U(s,"submit",n[17]),U(s,"mousedown",kr)],B=!0)},p(H,V){V[0]&1024&&o.value!==H[10]&&se(o,H[10]),V[0]&2048&&h.value!==H[11]&&se(h,H[11]),H[13]&&H[13].length>0?S?S.p(H,V):(S=zt(H),S.c(),S.m(s,null)):S&&(S.d(1),S=null)},d(H){H&&D(t),S&&S.d(),B=!1,fe(R)}}}function zt(n){let t,e,s,r,l,a,o,u,i,d=Fe(n[13]),g=[];for(let h=0;h<d.length;h+=1)g[h]=Lt(Ct(n,d,h));return{c(){t=E("div"),e=E("div"),e.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"></path></svg>`,s=M(),r=E("select"),l=E("option"),l.textContent="Select a model";for(let h=0;h<g.length;h+=1)g[h].c();a=M(),o=E("button"),o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"></path></svg>`,f(e,"class","tlwd-flex tlwd-items-center"),l.__value="",se(l,l.__value),f(r,"id","open-webui-model-input"),f(r,"class","tlwd-p-0 tlwd-m-0 tlwd-text-xl tlwd-w-full tlwd-font-medium tlwd-bg-transparent tlwd-border-none placeholder:tlwd-text-gray-500 tlwd-text-neutral-100 tlwd-outline-none"),f(r,"autocomplete","off"),r.required=!0,n[15]===void 0&&Ke(()=>n[23].call(r)),f(o,"class","tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-0 tlwd-m-0 tlwd-outline-none tlwd-border-none"),f(o,"type","submit"),f(t,"class","tlwd-flex tlwd-items-center tlwd-gap-2 tlwd-w-full tlwd-mt-2")},m(h,p){K(h,t,p),k(t,e),k(t,s),k(t,r),k(r,l);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(r,null);bt(r,n[15],!0),k(t,a),k(t,o),u||(i=U(r,"change",n[23]),u=!0)},p(h,p){if(p[0]&8192){d=Fe(h[13]);let w;for(w=0;w<d.length;w+=1){const x=Ct(h,d,w);g[w]?g[w].p(x,p):(g[w]=Lt(x),g[w].c(),g[w].m(r,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=d.length}p[0]&40960&&bt(r,h[15])},d(h){h&&D(t),Ut(g,h),u=!1,i()}}}function Lt(n){let t,e=(n[15].name??n[15].id)+"",s,r;return{c(){t=E("option"),s=pe(e),t.__value=r=n[15].id,se(t,t.__value)},m(l,a){K(l,t,a),k(t,s)},p(l,a){a[0]&8192&&e!==(e=(l[15].name??l[15].id)+"")&&at(s,e),a[0]&8192&&r!==(r=l[15].id)&&(t.__value=r,se(t,t.__value))},d(l){l&&D(t)}}}function Mt(n){let t,e,s,r,l,a,o,u,i,d,g,h,p,w,x,B,R,S,H,V,J,G,be,le,$,ee,j,Pe,we,ze,ie,ye,Le,ae=Fe(n[6]),Z=[];for(let m=0;m<ae.length;m+=1)Z[m]=Ot(Rt(n,ae,m));function Me(m,y){if(m[3]&&m[7])return wr;if(m[7]&&!m[3])return gr}let ce=Me(n),F=ce&&ce(n),W=n[9]&&n[8]&&Bt(n);return{c(){t=E("div"),e=E("div"),s=E("div"),r=E("div"),l=E("div"),l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5 tlwd-text-neutral-300"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"></path></svg> <h3 class="tlwd-text-xl tlwd-font-semibold tlwd-text-neutral-100">AI Response</h3>`,a=M(),o=E("button"),o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="${2.5}" stroke="currentColor" class="tlwd-size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>`,u=M(),i=E("div");for(let m=0;m<Z.length;m+=1)Z[m].c();d=M(),F&&F.c(),g=M(),W&&W.c(),h=M(),p=E("div"),w=E("form"),x=E("input"),B=M(),R=E("button"),S=pe("Send"),V=M(),J=E("div"),G=E("div"),G.textContent="Press Escape to close",be=M(),le=E("div"),$=E("button"),ee=ve("svg"),j=ve("path"),Pe=pe(`
                Continue in OpenWebUI`),ze=M(),ie=E("button"),ie.textContent="Copy conversation",f(l,"class","tlwd-flex tlwd-items-center tlwd-gap-2"),f(o,"class","tlwd-flex tlwd-items-center tlwd-bg-transparent tlwd-text-neutral-300 hover:tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-p-1 tlwd-outline-none tlwd-border-none tlwd-transition-colors"),f(o,"type","button"),f(r,"class","tlwd-flex tlwd-items-center tlwd-justify-between tlwd-mb-5 tlwd-pb-4 tlwd-border-b tlwd-border-gray-700"),f(i,"class","tlwd-flex-1 tlwd-overflow-y-auto tlwd-pr-2 tlwd-mb-4"),f(x,"id","open-webui-followup-input"),f(x,"type","text"),f(x,"placeholder","Ask a follow-up question..."),x.disabled=n[7],f(x,"class","tlwd-flex-1 tlwd-px-4 tlwd-py-3 tlwd-text-base tlwd-bg-gray-800/50 tlwd-border tlwd-border-gray-700 tlwd-rounded-lg tlwd-text-neutral-100 placeholder:tlwd-text-neutral-500 tlwd-outline-none focus:tlwd-border-gray-600 disabled:tlwd-opacity-50 disabled:tlwd-cursor-not-allowed"),f(x,"autocomplete","off"),f(R,"type","submit"),R.disabled=H=!n[5].trim()||n[7],f(R,"class","tlwd-px-5 tlwd-py-3 tlwd-text-base tlwd-font-medium tlwd-bg-blue-600 hover:tlwd-bg-blue-700 disabled:tlwd-opacity-50 disabled:tlwd-cursor-not-allowed tlwd-text-white tlwd-rounded-lg tlwd-transition-colors tlwd-outline-none tlwd-border-none"),f(w,"class","tlwd-flex tlwd-items-center tlwd-gap-2"),f(w,"enctype","application/x-www-form-urlencoded"),f(G,"class","tlwd-text-sm tlwd-text-neutral-300"),f(j,"stroke-linecap","round"),f(j,"stroke-linejoin","round"),f(j,"d","M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"),f(ee,"xmlns","http://www.w3.org/2000/svg"),f(ee,"fill","none"),f(ee,"viewBox","0 0 24 24"),f(ee,"stroke-width",2),f(ee,"stroke","currentColor"),f(ee,"class","tlwd-size-4"),f($,"class","tlwd-text-sm tlwd-text-blue-400 hover:tlwd-text-blue-300 disabled:tlwd-text-neutral-500 disabled:tlwd-opacity-50 disabled:tlwd-cursor-not-allowed tlwd-cursor-pointer tlwd-outline-none tlwd-border-none tlwd-bg-transparent tlwd-transition-colors tlwd-flex tlwd-items-center tlwd-gap-1"),f($,"type","button"),$.disabled=we=n[6].length===0,f(ie,"class","tlwd-text-sm tlwd-text-neutral-300 hover:tlwd-text-neutral-100 tlwd-cursor-pointer tlwd-outline-none tlwd-border-none tlwd-bg-transparent tlwd-transition-colors"),f(ie,"type","button"),f(le,"class","tlwd-flex tlwd-items-center tlwd-gap-3"),f(J,"class","tlwd-mt-3 tlwd-flex tlwd-items-center tlwd-justify-between"),f(p,"class","tlwd-border-t tlwd-border-gray-700 tlwd-pt-3"),f(s,"role","dialog"),f(s,"aria-modal","true"),f(s,"class","tlwd-w-full tlwd-flex tlwd-flex-col tlwd-justify-between tlwd-py-5 tlwd-px-6 tlwd-rounded-2xl tlwd-outline tlwd-outline-1 tlwd-outline-gray-850 tlwd-backdrop-blur-3xl tlwd-bg-gray-850/70 shadow-4xl modal-animation tlwd-max-h-[85vh] tlwd-overflow-hidden tlwd-flex tlwd-flex-col"),f(e,"class","tlwd-m-auto tlwd-max-w-4xl tlwd-w-full tlwd-pb-32 tlwd-px-4"),f(t,"role","dialog"),f(t,"aria-modal","true"),f(t,"id","openwebui-response-modal"),f(t,"class","tlwd-fixed tlwd-top-0 tlwd-right-0 tlwd-left-0 tlwd-bottom-0 tlwd-w-full tlwd-min-h-screen tlwd-h-screen tlwd-flex tlwd-justify-center tlwd-z-[9999999999] tlwd-overflow-hidden tlwd-overscroll-contain")},m(m,y){K(m,t,y),k(t,e),k(e,s),k(s,r),k(r,l),k(r,a),k(r,o),k(s,u),k(s,i);for(let _=0;_<Z.length;_+=1)Z[_]&&Z[_].m(i,null);k(i,d),F&&F.m(i,null),n[28](i),k(s,g),W&&W.m(s,null),k(s,h),k(s,p),k(p,w),k(w,x),se(x,n[5]),k(w,B),k(w,R),k(R,S),k(p,V),k(p,J),k(J,G),k(J,be),k(J,le),k(le,$),k($,ee),k(ee,j),k($,Pe),k(le,ze),k(le,ie),ye||(Le=[U(o,"click",n[27]),U(x,"input",n[29]),U(w,"submit",hn(n[19])),U($,"click",n[18]),U(ie,"click",n[30]),U(s,"mousedown",br),U(t,"mousedown",n[31])],ye=!0)},p(m,y){if(y[0]&64){ae=Fe(m[6]);let _;for(_=0;_<ae.length;_+=1){const C=Rt(m,ae,_);Z[_]?Z[_].p(C,y):(Z[_]=Ot(C),Z[_].c(),Z[_].m(i,d))}for(;_<Z.length;_+=1)Z[_].d(1);Z.length=ae.length}ce===(ce=Me(m))&&F?F.p(m,y):(F&&F.d(1),F=ce&&ce(m),F&&(F.c(),F.m(i,null))),m[9]&&m[8]?W?W.p(m,y):(W=Bt(m),W.c(),W.m(s,h)):W&&(W.d(1),W=null),y[0]&128&&(x.disabled=m[7]),y[0]&32&&x.value!==m[5]&&se(x,m[5]),y[0]&160&&H!==(H=!m[5].trim()||m[7])&&(R.disabled=H),y[0]&64&&we!==(we=m[6].length===0)&&($.disabled=we)},d(m){m&&D(t),Ut(Z,m),F&&F.d(),n[28](null),W&&W.d(),ye=!1,fe(Le)}}}function hr(n){let t,e,s,r,l=Ye(n[37].content)+"",a;return{c(){t=E("div"),e=E("div"),e.textContent="Assistant:",s=M(),r=E("div"),a=M(),f(e,"class","tlwd-text-sm tlwd-text-neutral-300 tlwd-mb-2 tlwd-font-medium"),f(r,"class","tlwd-text-base tlwd-text-neutral-100 tlwd-leading-relaxed markdown-content"),f(t,"class","tlwd-mb-5")},m(o,u){K(o,t,u),k(t,e),k(t,s),k(t,r),r.innerHTML=l,k(t,a)},p(o,u){u[0]&64&&l!==(l=Ye(o[37].content)+"")&&(r.innerHTML=l)},d(o){o&&D(t)}}}function fr(n){let t,e,s,r,l=n[37].content+"",a,o;return{c(){t=E("div"),e=E("div"),e.textContent="You:",s=M(),r=E("div"),a=pe(l),o=M(),f(e,"class","tlwd-text-sm tlwd-text-neutral-300 tlwd-mb-2 tlwd-font-medium"),f(r,"class","tlwd-text-base tlwd-text-neutral-100 tlwd-bg-gray-800/50 tlwd-rounded-lg tlwd-p-4"),f(t,"class","tlwd-mb-5")},m(u,i){K(u,t,i),k(t,e),k(t,s),k(t,r),k(r,a),k(t,o)},p(u,i){i[0]&64&&l!==(l=u[37].content+"")&&at(a,l)},d(u){u&&D(t)}}}function Ot(n){let t;function e(l,a){if(l[37].role==="user")return fr;if(l[37].role==="assistant")return hr}let s=e(n),r=s&&s(n);return{c(){r&&r.c(),t=Zt()},m(l,a){r&&r.m(l,a),K(l,t,a)},p(l,a){s===(s=e(l))&&r?r.p(l,a):(r&&r.d(1),r=s&&s(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){l&&D(t),r&&r.d(l)}}}function gr(n){let t;return{c(){t=E("div"),t.innerHTML='<div class="tlwd-text-sm tlwd-text-neutral-300 tlwd-mb-2 tlwd-font-medium">Assistant:</div> <span class="tlwd-text-base tlwd-text-neutral-300 tlwd-italic">Waiting for response...</span>',f(t,"class","tlwd-mb-5")},m(e,s){K(e,t,s)},p:de,d(e){e&&D(t)}}}function wr(n){let t,e,s,r,l,a=Ye(n[3])+"",o,u;return{c(){t=E("div"),e=E("div"),e.textContent="Assistant:",s=M(),r=E("div"),l=new wn(!1),o=M(),u=E("span"),u.textContent="|",f(e,"class","tlwd-text-sm tlwd-text-neutral-300 tlwd-mb-2 tlwd-font-medium"),l.a=o,f(u,"class","tlwd-inline-block tlwd-w-2 tlwd-h-4 tlwd-bg-neutral-300 tlwd-ml-1 tlwd-animate-pulse"),f(r,"class","tlwd-text-base tlwd-text-neutral-100 tlwd-leading-relaxed markdown-content"),f(t,"class","tlwd-mb-5")},m(i,d){K(i,t,d),k(t,e),k(t,s),k(t,r),l.m(a,r),k(r,o),k(r,u)},p(i,d){d[0]&8&&a!==(a=Ye(i[3])+"")&&l.p(a)},d(i){i&&D(t)}}}function Bt(n){let t,e,s,r,l,a,o;return{c(){t=E("div"),e=E("div"),s=ve("svg"),r=ve("path"),l=M(),a=E("p"),o=pe(n[8]),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(r,"d","M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"),f(s,"xmlns","http://www.w3.org/2000/svg"),f(s,"fill","none"),f(s,"viewBox","0 0 24 24"),f(s,"stroke-width",2.5),f(s,"stroke","currentColor"),f(s,"class","tlwd-size-5 tlwd-text-red-400"),f(a,"class","tlwd-text-base tlwd-text-red-300"),f(e,"class","tlwd-flex tlwd-items-center tlwd-gap-2"),f(t,"class","tlwd-mb-3 tlwd-p-3 tlwd-bg-red-900/20 tlwd-border tlwd-border-red-700/50 tlwd-rounded-lg")},m(u,i){K(u,t,i),k(t,e),k(e,s),k(s,r),k(e,l),k(e,a),k(a,o)},p(u,i){i[0]&256&&at(o,u[8])},d(u){u&&D(t)}}}function mr(n){let t,e,s=n[0]&&Pt(n),r=n[2]&&Mt(n);return{c(){s&&s.c(),t=M(),r&&r.c(),e=Zt()},m(l,a){s&&s.m(l,a),K(l,t,a),r&&r.m(l,a),K(l,e,a)},p(l,a){l[0]?s?s.p(l,a):(s=Pt(l),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),l[2]?r?r.p(l,a):(r=Mt(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:de,o:de,d(l){l&&(D(t),D(e)),s&&s.d(l),r&&r.d(l)}}}const kr=n=>{n.stopPropagation()},xr=n=>{n.stopPropagation()},br=n=>{n.stopPropagation()};function yr(n,t,e){let s=!1,r=!0,l=!1,a="",o="",u="",i=[],d=!1,g="",h=!1,p="",w="",x="",B="",R=[],S=null;const H=()=>{if(console.log("resetConfig"),!j()){console.warn("Extension: Chrome APIs not available - cannot reset config");return}try{chrome.storage.local.clear().then(()=>{console.log("Value is cleared")})}catch(m){const y=(m==null?void 0:m.message)||String(m);y.includes("Extension context invalidated")||y.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome storage API not available - extension may have been reloaded"):console.log(m)}e(10,p=""),e(11,w=""),e(15,x=""),e(13,R=[]),e(1,r=!0)},V=m=>{m.preventDefault();try{const y=new URL(p.startsWith("http")?p:`https://${p}`);if(!["http:","https:"].includes(y.protocol)){console.error("Extension: Invalid URL protocol");return}const _=encodeURIComponent(B),C=encodeURIComponent(x);window.open(`${p}/?q=${_}&models=${C}`,"_blank"),e(12,B=""),e(0,s=!1)}catch{console.error("Extension: Invalid URL format")}},J=async m=>{m.preventDefault();try{const y=new URL(p.startsWith("http")?p:`https://${p}`);if(!["http:","https:"].includes(y.protocol)){console.error("Extension: Invalid URL protocol");return}}catch{console.error("Extension: Invalid URL format");return}if(!w||typeof w!="string"||w.trim().length===0){console.error("Extension: Invalid API key");return}if(!x||typeof x!="string"||x.trim().length===0){console.error("Extension: Invalid model");return}if(!j()){console.error("Extension: Chrome APIs not available - cannot save config");return}try{const y=await chrome.runtime.sendMessage({action:"encryptApiKey",apiKey:w.trim()});y.error?(console.error("Extension: Failed to encrypt API key:",y.error),chrome.storage.local.set({url:p.trim(),key:w.trim(),model:x.trim()})):chrome.storage.local.set({url:p.trim(),key:y.encrypted,model:x.trim()}).then(()=>{console.log("Value is set (API key encrypted)")})}catch(y){const _=(y==null?void 0:y.message)||String(y);_.includes("Extension context invalidated")||_.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome APIs not available - extension may have been reloaded"):console.log(y)}e(1,r=!1)},G=async()=>{if(!j()){console.warn("Extension: Chrome APIs not available - cannot get selection"),e(0,s=!s);return}try{const m=await chrome.runtime.sendMessage({action:"getSelection"});((m==null?void 0:m.data)??!1)&&e(12,B=m.data)}catch(m){const y=(m==null?void 0:m.message)||String(m);y.includes("Extension context invalidated")||y.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome runtime API not available"):console.log("catch",m)}e(0,s=!s),setTimeout(()=>{const m=document.getElementById("open-webui-search-input");m&&m.focus()},0)},be=async m=>{var A;if(!m||m.trim().length===0){console.warn("Extension: No content to summarize"),e(8,g="No content could be extracted from this page."),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3);return}let y=p,_=w,C=x;if(j())try{const c=await chrome.storage.local.get(["url","key","model"]);if(c.url&&(y=c.url),c.model&&(C=c.model),c.key)try{const b=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:c.key});b.error?(console.error("Extension: Failed to decrypt API key:",b.error),_=c.key):_=b.decrypted}catch(b){const O=(b==null?void 0:b.message)||String(b);O.includes("Extension context invalidated")||O.includes("Cannot read properties of undefined")?(console.warn("Extension: Chrome runtime API not available"),_=c.key):(console.error("Extension: Error decrypting API key:",b),_=c.key)}}catch(c){const b=(c==null?void 0:c.message)||String(c);b.includes("Extension context invalidated")||b.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome storage API not available - extension may have been reloaded"):console.error("Extension: Error getting config:",c)}else if(console.warn("Extension: Chrome APIs not available - cannot get config"),!y||!_||!C){e(1,r=!0);return}if(!y||!_||!C){console.warn("Extension: Missing configuration. Please configure the extension first."),e(1,r=!0);return}e(4,o="Summarize this page"),e(3,a=""),e(6,i=[{role:"system",content:"You are a helpful assistant that summarizes web page content. Ignore navigation menus, advertisements, cookie notices, footers, headers, and other non-content elements. Focus on the main article or content of the page. Provide a clear, concise summary. You can use markdown formatting (headers, lists, code blocks, bold, italic, etc.) to make your response more readable and well-structured."},{role:"user",content:m.substring(0,5e4)}]),e(2,l=!0),e(7,d=!0),e(9,h=!1),e(8,g="");const te=(R.length>0?((A=R.find(c=>c.id===C))==null?void 0:A.owned_by)==="openai":!1)?`${y}/openai`:`${y}/ollama/v1`;try{const[c,b]=await qe(_,{model:C,messages:i,stream:!0},te);if(c&&c.ok){const O=c.body.pipeThrough(new TextDecoderStream).pipeThrough(Ue(`
`)).getReader();for(;;){const{value:P,done:N}=await O.read();if(N)break;try{let T=P.split(`
`);for(const I of T)if(I!==""&&I!=="data: [DONE]"){let q=JSON.parse(I.replace(/^data: /,""));if(!("request_id"in q)){const X=q.choices[0].delta.content??"";e(3,a+=X),S&&setTimeout(()=>{e(14,S.scrollTop=S.scrollHeight,S)},0)}}}catch(T){console.log(T)}}try{a&&(i.some(N=>N.role==="assistant"&&N.content===a)||e(6,i=[...i,{role:"assistant",content:a}])),e(7,d=!1),e(3,a=""),setTimeout(()=>{const P=document.getElementById("open-webui-followup-input");P&&P.focus()},100)}catch(P){console.error("Extension: Error adding response to history:",P),e(7,d=!1)}}else console.error("Extension: API request failed:",c),e(2,l=!1),e(7,d=!1),e(8,g="Failed to get summary. Please check your configuration."),e(9,h=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)}catch(c){console.error("Extension: Error summarizing page:",c);const b=(c==null?void 0:c.message)||String(c);b.includes("Rate limit exceeded")?(e(8,g=b),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)):(e(8,g=`Error: ${b}`),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)),e(7,d=!1)}},le=async m=>{var A;if(!m||m.trim().length===0){console.warn("Extension: No text to explain"),e(8,g="No text was selected. Please select some text and try again."),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3);return}let y=p,_=w,C=x;if(j())try{const c=await chrome.storage.local.get(["url","key","model"]);if(c.url&&(y=c.url),c.model&&(C=c.model),c.key)try{const b=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:c.key});b.error?(console.error("Extension: Failed to decrypt API key:",b.error),_=c.key):_=b.decrypted}catch(b){const O=(b==null?void 0:b.message)||String(b);O.includes("Extension context invalidated")||O.includes("Cannot read properties of undefined")?(console.warn("Extension: Chrome runtime API not available"),_=c.key):(console.error("Extension: Error decrypting API key:",b),_=c.key)}}catch(c){const b=(c==null?void 0:c.message)||String(c);b.includes("Extension context invalidated")||b.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome storage API not available - extension may have been reloaded"):console.error("Extension: Error getting config:",c)}else if(console.warn("Extension: Chrome APIs not available - cannot get config"),!y||!_||!C){e(1,r=!0);return}if(!y||!_||!C){console.warn("Extension: Missing configuration. Please configure the extension first."),e(1,r=!0);return}e(4,o=m.substring(0,100)),e(3,a=""),e(6,i=[{role:"system",content:`I need help understanding a concept or term mentioned in this text: ${m}

Please explain this term/concept in simple, clear language. Provide a definition and offer examples to illustrate your point.

If there are any related ideas or concepts that I should know about, please summarize those as well.

Additionally, if you can provide any context or background information that might be helpful for understanding the term/concept, please do so.

Only use the selected text: The generated response should only use the text that was selected by the user and not include any external information unless it is directly relevant to the concept being explained.

You can use markdown formatting (headers, lists, code blocks, bold, italic, etc.) to make your explanation more readable and well-structured.`},{role:"user",content:m}]),e(2,l=!0),e(7,d=!0),e(9,h=!1),e(8,g="");const te=(R.length>0?((A=R.find(c=>c.id===C))==null?void 0:A.owned_by)==="openai":!1)?`${y}/openai`:`${y}/ollama/v1`;try{const[c,b]=await qe(_,{model:C,messages:i,stream:!0},te);if(c&&c.ok){const O=c.body.pipeThrough(new TextDecoderStream).pipeThrough(Ue(`
`)).getReader();for(;;){const{value:P,done:N}=await O.read();if(N)break;try{let T=P.split(`
`);for(const I of T)if(I!==""&&I!=="data: [DONE]"){let q=JSON.parse(I.replace(/^data: /,""));if(!("request_id"in q)){const X=q.choices[0].delta.content??"";e(3,a+=X),S&&setTimeout(()=>{e(14,S.scrollTop=S.scrollHeight,S)},0)}}}catch(T){console.log(T)}}try{a&&(i.some(N=>N.role==="assistant"&&N.content===a)||e(6,i=[...i,{role:"assistant",content:a}])),e(7,d=!1),e(3,a=""),setTimeout(()=>{const P=document.getElementById("open-webui-followup-input");P&&P.focus()},100)}catch(P){console.error("Extension: Error adding response to history:",P),e(7,d=!1)}}else console.error("Extension: API request failed:",c),e(2,l=!1),e(7,d=!1),e(8,g="Failed to get explanation. Please check your configuration."),e(9,h=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)}catch(c){const b=(c==null?void 0:c.message)||String(c);if(b.includes("Extension context invalidated")){e(7,d=!1),e(2,l=!1);return}console.error("Extension: Error explaining text:",c),b.includes("Rate limit exceeded")?(e(8,g=b),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)):(e(8,g=`Error: ${b}`),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)),e(7,d=!1)}},$=async()=>{var m,y;if(!p||i.length===0){console.warn("Extension: No conversation to continue or URL not configured");return}if(!j()){console.warn("Extension: Chrome APIs not available - cannot continue in OpenWebUI"),window.open(p,"_blank");return}try{let _=p,C=w;try{const A=await chrome.storage.local.get(["url","key"]);if(A.url&&(_=A.url),A.key)try{const c=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:A.key});c.error?C=A.key:C=c.decrypted}catch(c){const b=(c==null?void 0:c.message)||String(c);(b.includes("Extension context invalidated")||b.includes("Cannot read properties of undefined"))&&console.warn("Extension: Chrome runtime API not available"),C=A.key}}catch(A){const c=(A==null?void 0:A.message)||String(A);c.includes("Extension context invalidated")||c.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome storage API not available"):console.error("Extension: Error getting config:",A)}const Y=i.filter(A=>A.role!=="system");if(Y.length===0){console.warn("Extension: No messages to send");return}try{const A=await chrome.runtime.sendMessage({action:"createChat",url:_,api_key:C,body:{title:((y=(m=Y[0])==null?void 0:m.content)==null?void 0:y.substring(0,50))||"Extension Conversation",messages:Y}});if(A.data&&A.data.id){window.open(`${_}/chat/${A.data.id}`,"_blank");return}else A.error&&console.log("Extension: Could not create chat via API, trying URL parameters:",A.error)}catch(A){console.log("Extension: Could not create chat via API, trying URL parameters:",A)}const te=Y.find(A=>A.role==="user");if(te){const A=encodeURIComponent(te.content);window.open(`${_}/?q=${A}`,"_blank")}else window.open(_,"_blank")}catch(_){console.error("Extension: Error continuing in OpenWebUI:",_);try{const C=await chrome.storage.local.get(["url"]);C.url&&window.open(C.url,"_blank")}catch(C){console.error("Extension: Could not open OpenWebUI:",C)}}},ee=async()=>{var A;if(!u.trim()||d)return;const m=u.trim();e(5,u=""),a&&(i.some(b=>b.role==="assistant"&&b.content===a)||e(6,i=[...i,{role:"assistant",content:a}])),e(6,i=[...i,{role:"user",content:m}]),e(3,a=""),e(7,d=!0),setTimeout(()=>{const c=document.getElementById("open-webui-followup-input");c&&c.focus()},100);let y=p,_=w,C=x;try{const c=await chrome.storage.local.get(["url","key","model"]);if(c.url&&(y=c.url),c.model&&(C=c.model),c.key)try{const b=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:c.key});b.error?(console.error("Extension: Failed to decrypt API key:",b.error),_=c.key):_=b.decrypted}catch(b){console.error("Extension: Error decrypting API key:",b),_=c.key}}catch(c){c.message&&c.message.includes("Extension context invalidated")||console.log("Failed to get stored config:",c)}const te=(R.length>0?((A=R.find(c=>c.id===C))==null?void 0:A.owned_by)==="openai":!1)?`${y}/openai`:`${y}/ollama/v1`;try{const[c,b]=await qe(_,{model:C,messages:i,stream:!0},te);if(c&&c.ok){const O=c.body.pipeThrough(new TextDecoderStream).pipeThrough(Ue(`
`)).getReader();for(;;){const{value:P,done:N}=await O.read();if(N)break;try{let T=P.split(`
`);for(const I of T)if(I!==""&&I!=="data: [DONE]"){let q=JSON.parse(I.replace(/^data: /,""));if(!("request_id"in q)){const X=q.choices[0].delta.content??"";e(3,a+=X),S&&setTimeout(()=>{e(14,S.scrollTop=S.scrollHeight,S)},0)}}}catch(T){console.log(T)}}try{a&&(i.some(N=>N.role==="assistant"&&N.content===a)||e(6,i=[...i,{role:"assistant",content:a}])),e(7,d=!1),e(3,a=""),setTimeout(()=>{const P=document.getElementById("open-webui-followup-input");P&&P.focus()},100)}catch(P){console.error("Extension: Error adding response to history:",P),e(7,d=!1)}}else console.error("Extension: API request failed:",c),e(7,d=!1)}catch(c){console.error("Extension: Error sending follow-up:",c);const b=(c==null?void 0:c.message)||String(c);if(b.includes("Rate limit exceeded")&&(e(8,g=b),e(9,h=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)),a&&d)try{i.some(P=>P.role==="assistant"&&P.content===a)||e(6,i=[...i,{role:"assistant",content:a}])}catch(O){console.error("Extension: Could not save response:",O)}e(7,d=!1)}},j=()=>{try{return typeof chrome<"u"&&chrome!==null&&typeof chrome.storage<"u"&&chrome.storage!==null&&typeof chrome.storage.local<"u"&&typeof chrome.runtime<"u"&&chrome.runtime!==null}catch{return!1}};kn(async()=>{if(window!==window.top)return;if(!j()){console.warn("Extension: Chrome APIs not available. Extension may have been reloaded or context invalidated.");return}window.openWebUIToggleSearch=G;const m=()=>{G()};window.addEventListener("open-webui-toggle-search",m);const y=c=>{c.detail&&c.detail.content&&be(c.detail.content)};window.addEventListener("open-webui-summarize-page",y);let _=!1;const C=c=>{window===window.top&&!_&&c.detail&&c.detail.text&&(_=!0,le(c.detail.text).finally(()=>{_=!1}))};window.addEventListener("open-webui-explain-text",C);let Y=!1;chrome.runtime.onMessage.addListener((c,b,O)=>(c.action==="toggleSearch"?(window===window.top&&G(),O({success:!0})):c.action==="summarizePage"?(window===window.top&&!Y&&(Y=!0,c.error?(console.error("Extension: Error from background script:",c.error),e(8,g=c.error),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g=""),Y=!1},5e3)):c.content?be(c.content).finally(()=>{Y=!1}):Y=!1),O({success:!0})):c.action==="explainText"&&(window===window.top&&!_&&(_=!0,c.error?(console.error("Extension: Error from background script:",c.error),e(8,g=c.error),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g=""),_=!1},5e3)):c.text?le(c.text).finally(()=>{_=!1}):_=!1),O({success:!0})),!0));const te=async c=>{var b;if(s&&c.shiftKey&&c.key==="Escape"?H():c.key==="Escape"&&(l?(e(2,l=!1),e(3,a=""),e(4,o=""),e(5,u=""),e(6,i=[]),e(7,d=!1)):e(0,s=!1)),c.key==="Enter"&&(c.metaKey||c.ctrlKey)&&(c.shiftKey||c.altKey)){c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation();let O=p,P=w,N=x;if(j())try{const T=await chrome.storage.local.get(["url","key","model"]);if(T.url&&(O=T.url,e(10,p=T.url)),T.model&&(N=T.model,e(15,x=T.model)),T.key)try{const I=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:T.key});I.error?(console.error("Extension: Failed to decrypt API key:",I.error),P=T.key,e(11,w=T.key)):(P=I.decrypted,e(11,w=I.decrypted))}catch(I){const q=(I==null?void 0:I.message)||String(I);q.includes("Extension context invalidated")||q.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome runtime API not available"):console.error("Extension: Error decrypting API key:",I),P=T.key,e(11,w=T.key)}}catch(T){const I=(T==null?void 0:T.message)||String(T);I.includes("Extension context invalidated")||I.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome storage API not available - using cached config"):console.log("Failed to get stored config:",T)}else if(console.warn("Extension: Chrome APIs not available - using cached config"),!O||!P||!N){console.warn("Extension: Missing configuration. Please configure the extension first.");return}if(!O||!P||!N){console.warn("Extension: Missing configuration. Please configure the extension first.");return}if(!j()){console.warn("Extension: Chrome APIs not available - cannot get selection");return}try{const T=await chrome.runtime.sendMessage({action:"getSelection"});if((T==null?void 0:T.data)??!1){e(4,o=T.data),e(3,a=""),e(6,i=[{role:"system",content:"You are a helpful assistant. You can use markdown formatting (headers, lists, code blocks, bold, italic, etc.) to make your responses more readable and well-structured."},{role:"user",content:T.data}]),e(2,l=!0),e(7,d=!0);const I=document.activeElement;let q=null;I&&(I.tagName==="INPUT"||I.tagName==="TEXTAREA")&&(q=I);let X=null;q&&(X=q.id||`open-webui-target-${Date.now()}`,q.id||(q.id=X));const an=(R.length>0?((b=R.find($e=>$e.id===N))==null?void 0:b.owned_by)==="openai":!1)?`${O}/openai`:`${O}/ollama/v1`,[Oe,Tr]=await qe(P,{model:N,messages:i,stream:!0},an);if(Oe&&Oe.ok){const $e=Oe.body.pipeThrough(new TextDecoderStream).pipeThrough(Ue(`
`)).getReader();let cn=!1;for(;;){const{value:ue,done:Be}=await $e.read();if(Be)break;try{let et=ue.split(`
`);for(const He of et)if(He!=="")if(console.log(He),He==="data: [DONE]")console.log("DONE"),cn=!0;else{let Ne=JSON.parse(He.replace(/^data: /,""));if(console.log(Ne),"request_id"in Ne)console.log(Ne.request_id);else{const tt=Ne.choices[0].delta.content??"";if(e(3,a+=tt),S&&setTimeout(()=>{e(14,S.scrollTop=S.scrollHeight,S)},0),X&&tt&&j())try{await chrome.runtime.sendMessage({action:"writeText",text:tt,targetId:X})}catch(_e){const kt=(_e==null?void 0:_e.message)||String(_e);!kt.includes("Extension context invalidated")&&!kt.includes("Cannot read properties of undefined")&&console.debug("Extension: Could not write to input field:",_e)}}}}catch(et){console.log(et)}}try{a&&(i.some(Be=>Be.role==="assistant"&&Be.content===a)||e(6,i=[...i,{role:"assistant",content:a}])),e(7,d=!1),e(3,a=""),setTimeout(()=>{const ue=document.getElementById("open-webui-followup-input");ue&&ue.focus()},100)}catch(ue){console.error("Extension: Error adding response to history:",ue),e(7,d=!1)}}else console.error("Extension: API request failed:",Oe),e(2,l=!1),e(7,d=!1)}}catch(T){const I=(T==null?void 0:T.message)||String(T);if(I.includes("Extension context invalidated")||I.includes("Cannot read properties of undefined")){console.warn("Extension: Chrome APIs not available - extension may have been reloaded"),e(7,d=!1),e(2,l=!1);return}if(console.error("Extension: Error getting AI response:",T),I.includes("Rate limit exceeded")&&(e(8,g=I),e(9,h=!0),e(2,l=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)),a&&d)try{i.some(X=>X.role==="assistant"&&X.content===a)||e(6,i=[...i,{role:"assistant",content:a}])}catch(q){console.error("Extension: Could not save response:",q)}e(7,d=!1)}}};document.addEventListener("keydown",te,{capture:!0,passive:!1});let A=null;if(!j()){console.warn("Extension: Chrome APIs not available for config loading"),e(1,r=!0);return}try{A=await chrome.storage.local.get()}catch(c){const b=(c==null?void 0:c.message)||String(c);b.includes("Extension context invalidated")||b.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome storage API not available - extension may have been reloaded"):console.error("Extension: Error getting config:",c)}if(A){if(e(10,p=A.url??""),e(15,x=A.model??""),A.key)if(j())try{const c=await chrome.runtime.sendMessage({action:"decryptApiKey",encryptedApiKey:A.key});c.error?(console.error("Extension: Failed to decrypt API key:",c.error),e(11,w=A.key)):e(11,w=c.decrypted)}catch(c){const b=(c==null?void 0:c.message)||String(c);b.includes("Extension context invalidated")||b.includes("Cannot read properties of undefined")?console.warn("Extension: Chrome runtime API not available - using stored key as-is"):console.error("Extension: Error decrypting API key:",c),e(11,w=A.key)}else e(11,w=A.key);else e(11,w="");if(A.url&&w&&A.model){if(e(1,r=!1),R.length===0)try{e(13,R=await _t(w,A.url))}catch(c){const b=(c==null?void 0:c.message)||String(c);!b.includes("CORS")&&!b.includes("Failed to fetch")&&!b.includes("Rate limit exceeded")&&!b.includes("Extension context invalidated")&&console.log("Failed to load models (non-critical):",c)}}else e(1,r=!0)}else e(1,r=!0);return()=>{document.removeEventListener("keydown",te),window.removeEventListener("open-webui-toggle-search",m),window.removeEventListener("open-webui-summarize-page",y),window.removeEventListener("open-webui-explain-text",C),delete window.openWebUIToggleSearch}});function Pe(){p=this.value,e(10,p)}function we(){w=this.value,e(11,w)}const ze=async()=>{p.endsWith("/")&&e(10,p=p.slice(0,-1));try{e(13,R=await _t(w,p)),e(9,h=!1),e(8,g="")}catch(m){const y=(m==null?void 0:m.message)||String(m);y.includes("Rate limit exceeded")?(e(8,g=y),e(9,h=!0),setTimeout(()=>{e(9,h=!1),e(8,g="")},5e3)):console.error("Extension: Error fetching models:",m)}};function ie(){x=gn(this),e(15,x),e(13,R)}function ye(){B=this.value,e(12,B)}const Le=()=>{e(1,r=!0)},ae=()=>{e(0,s=!1)},Z=()=>{e(2,l=!1),e(3,a=""),e(4,o=""),e(5,u=""),e(6,i=[]),e(7,d=!1)};function Me(m){rt[m?"unshift":"push"](()=>{S=m,e(14,S)})}function ce(){u=this.value,e(5,u)}return[s,r,l,a,o,u,i,d,g,h,p,w,B,R,S,x,V,J,$,ee,Pe,we,ze,ie,ye,Le,ae,Z,Me,ce,()=>{const m=i.filter(y=>y.role!=="system").map(y=>`${y.role==="user"?"You":"Assistant"}: ${y.content}`).join(`

`);navigator.clipboard.writeText(m)},()=>{e(2,l=!1),e(3,a=""),e(4,o=""),e(5,u=""),e(6,i=[]),e(7,d=!1)}]}class _r extends Gt{constructor(t){super(),Qt(this,t,yr,mr,jt,{},null,[-1,-1])}}function Er(n){let t,e,s;return e=new _r({}),{c(){t=E("div"),Sn(e.$$.fragment),f(t,"class","extension-container")},m(r,l){K(r,t,l),Ft(e,t,null),s=!0},p:de,i(r){s||(Kt(e.$$.fragment,r),s=!0)},o(r){An(e.$$.fragment,r),s=!1},d(r){r&&D(t),Wt(e)}}}class Ar extends Gt{constructor(t){super(),Qt(this,t,null,Er,jt,{})}}const Ht="__openwebui_extension_initialized";function Xe(){if(window!==window.top||window[Ht])return null;const n=document.getElementById("extension-app");if(n){if(n.__svelte_app)return n.__svelte_app;const t=new Ar({target:n});return n.__svelte_app=t,window[Ht]=!0,t}else return console.warn("Extension app target element not found, retrying..."),setTimeout(Xe,100),null}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Xe):Xe();Xe();
